@model LiqunManagement.ViewModels.FormViewModels
@{
    ViewBag.Title = "表單四期";
    ViewBag.Controller = "Form";
    Layout = "~/Views/Shared/smartadmin_Layout.cshtml";


    //表單編號
    var FormID = Model.FormID != null ? Model.FormID : "";
    //房客類別
    var TenantType = Model.tenantviewmodel != null ? Model.tenantviewmodel.TenantType.ToString() : "";
    //房東姓名
    var Name = Model.tenantviewmodel != null ? Model.tenantviewmodel.Name : "";
    //性別
    var Gender = Model.tenantviewmodel != null ? Model.tenantviewmodel.Gender.ToString() : "";
    //生日
    var BirthdayStr = Model.tenantviewmodel != null ? Model.tenantviewmodel.BirthdayStr != null ? Model.tenantviewmodel.BirthdayStr : "" : "";
    //身分證字號(法人-統一編號)
    var IDNumber = Model.tenantviewmodel != null ? Model.tenantviewmodel.IDNumber : "";
    //電話號碼
    var Phone = Model.tenantviewmodel != null ? Model.tenantviewmodel.Phone : "";
    //銀行代碼
    var BankNo = Model.tenantviewmodel != null ? Model.tenantviewmodel.BankNo : "";
    //分行代碼
    var BrancheNo = Model.tenantviewmodel != null ? Model.tenantviewmodel.BrancheNo : "";
    //銀行帳號
    var BankAccount = Model.tenantviewmodel != null ? Model.tenantviewmodel.BankAccount : "";
    //地址代碼
    var AddressCode = Model.tenantviewmodel != null ? Model.tenantviewmodel.AddressCode : "";
    var AddressDetail = Model.tenantviewmodel != null ? Model.tenantviewmodel.AddressDetail : "";
    //通訊地址代碼
    var ContactCode = Model.tenantviewmodel != null ? Model.tenantviewmodel.ContactAddressCode : "";
    var ContactAddressDetail = Model.tenantviewmodel != null ? Model.tenantviewmodel.ContactAddressDetail : "";
    //戶號
    var accountNo = Model.tenantviewmodel != null ? Model.tenantviewmodel.accountNo : "";
    //配偶
    var CoupleCount = Model.tenantviewmodel != null ? Model.tenantviewmodel.CoupleCount : "";
    var Couple = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Couple.ToString() : "");
    //直系親屬
    var DirectCount = Model.tenantviewmodel != null ? Model.tenantviewmodel.DirectCount : "";
    var Family1 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Family1.ToString() : "");
    var Family2 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Family2.ToString() : "");
    var Family3 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Family3.ToString() : "");
    var Family4 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Family4.ToString() : "");
    var Family5 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Family5.ToString() : "");
    var Family6 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Family6.ToString() : "");
    var Family7 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Family7.ToString() : "");
    var Family8 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Family8.ToString() : "");
    var Family9 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Family9.ToString() : "");
    var Family10 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Family10.ToString() : "");
    //代理人
    var AgentCount = Model.tenantviewmodel != null ? Model.tenantviewmodel.AgentCount : "";
    var Agent1 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Agent1.ToString() : "");
    var Agent2 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Agent2.ToString() : "");
    var Agent3 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Agent3.ToString() : "");
    //保證人
    var GuarantorCount = Model.tenantviewmodel != null ? Model.tenantviewmodel.GuarantorCount : "";
    var Guarantor1 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Guarantor1.ToString() : "");
    var Guarantor2 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Guarantor2.ToString() : "");
    var Guarantor3 = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.Guarantor3.ToString() : "");


    //下拉選單
    var TeAddress_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.TeAddress_District : "");
    var TeAddress_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.TeAddress_Road : "");
    var TeContact_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.TeContact_District : "");
    var TeContact_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.TeContact_Road : "");

    //代理人一
    var AgAddress1_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.AgAddress1_District : "");
    var AgAddress1_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.AgAddress1_Road : "");
    var AgContact1_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.AgContact1_District : "");
    var AgContact1_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.AgContact1_Road : "");
    //代理人二
    var AgAddress2_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.AgAddress2_District : "");
    var AgAddress2_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.AgAddress2_Road : "");
    var AgContact2_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.AgContact2_District : "");
    var AgContact2_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.AgContact2_Road : "");
    //代理人三
    var AgAddress3_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.AgAddress3_District : "");
    var AgAddress3_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.AgAddress3_Road : "");
    var AgContact3_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.AgContact3_District : "");
    var AgContact3_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.AgContact3_Road : "");
    //保證人一
    var GuAddress1_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.GuAddress1_District : "");
    var GuAddress1_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.GuAddress1_Road : "");
    var GuContact1_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.GuContact1_District : "");
    var GuContact1_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.GuContact1_Road : "");
    //保證人二
    var GuAddress2_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.GuAddress2_District : "");
    var GuAddress2_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.GuAddress2_Road : "");
    var GuContact2_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.GuContact2_District : "");
    var GuContact2_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.GuContact2_Road : "");
    //保證人三
    var GuAddress3_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.GuAddress3_District : "");
    var GuAddress3_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.GuAddress3_Road : "");
    var GuContact3_District = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.GuContact3_District : "");
    var GuContact3_Road = @Html.Raw(Model.tenantviewmodel != null ? Model.tenantviewmodel.GuContact3_Road : "");

    //備註
    var memo = Model.tenantviewmodel != null ? Model.tenantviewmodel.Memo : "";
}
<style>
    .padding-top-ten {
        padding-top: 10px !important;
    }

    .panel .panel-toolbar {
        display: none;
    }

    .panel.panel-locked:not(.panel-fullscreen) .panel-hdr h2:before {
        display: none;
    }

    .form-label {
        font-weight: 600 !important;
    }
</style>
@*select2*@
@*<link href="~/Content/select2/css/select2.min.css" rel="stylesheet" />*@
<link href="~/Content/smartadmin-package-4.5.1/smartadmin-html-full/dist/css/formplugins/select2/select2.bundle.css" rel="stylesheet" />
@*datepicker*@
<link href="~/Content/smartadmin-package-4.5.1/smartadmin-html-full/dist/css/formplugins/bootstrap-datepicker/bootstrap-datepicker.css" rel="stylesheet" />
@*sweetalert2*@
<link href="~/Content/sweetalert2/sweetalert2.min.css" rel="stylesheet" />

<main id="js-page-content" role="main" class="page-content">
    <ol class="breadcrumb page-breadcrumb">
        <li class="breadcrumb-item">
            <a href="javascript:void(0);">後臺管理系統</a>
        </li>
        <li class="breadcrumb-item">填寫表單</li>
        <li class="breadcrumb-item">四期</li>
        <li class="breadcrumb-item active">房客資料</li>
        <li class="position-absolute pos-top pos-right d-none d-sm-block">
            <span class="js-get-date"></span>
        </li>
    </ol>
    <div class="subheader">
        <h1 class="subheader-title">
            <i class="subheader-icon fal fa-edit"></i>
            <span class="font-weight-bold" style="padding-top:5px;">房客資料</span>
            <small>

            </small>
        </h1>
    </div>
    <div class="row">
        <div class="col-xl-12">
            <div id="panel-1" class="panel panel-locked">
                <div class="panel-hdr">
                    <h2>
                        房客資料
                    </h2>
                </div>
                <div class="panel-container show">
                    <div class="panel-content">
                        @using (Html.BeginForm("Tenant", "Form", FormMethod.Post, new { @class = "needs-validation", @enctype = "multipart/form-data", @novalidate = "" }))
                        {
                            @*表單編號*@
                            <input type="text" value="@ViewBag.FormID" name="FormID" hidden />
                            @*租客身分*@
                            <div class="panel-tag">
                                一般戶
                            </div>
                            <div class="form-group">
                                <div class="frame-wrap padding-top-ten">
                                    <div class="custom-control custom-radio custom-radio-rounded">
                                        <input type="radio" class="custom-control-input" id="typeRadio_0" name="typeRadio" value="0" required>
                                        <label class="custom-control-label" for="typeRadio_0">
                                            設籍於該市居民、有居住事實、或有就學就業需求者。
                                        </label>
                                    </div>
                                    <div class="custom-control custom-radio custom-radio-rounded">
                                        <input type="radio" class="custom-control-input" id="typeRadio_1" name="typeRadio" value="1" required>
                                        <label class="custom-control-label" for="typeRadio_1">
                                            現任職務之最高職務列等在警正四階以下或相當職務列等之基層警察及消防人員。
                                        </label>
                                    </div>
                                    <div class="custom-control custom-radio custom-radio-rounded">
                                        <input type="radio" class="custom-control-input" id="typeRadio_2" name="typeRadio" value="2" required>
                                        <label class="custom-control-label" for="typeRadio_2">
                                            申請人或家庭成員為身心障礙者或65歲以上老人，申請換居並將自有住宅出租。
                                        </label>
                                    </div>
                                </div>
                            </div>
                            <div class="panel-tag">
                                一類
                            </div>
                            <div class="frame-wrap padding-top-ten">
                                <div class="custom-control custom-radio custom-radio-rounded">
                                    <input type="radio" class="custom-control-input" id="typeRadio_3" name="typeRadio" value="3" required>
                                    <label class="custom-control-label" for="typeRadio_3">
                                        六十五歲以上之老人。(限申請人本人)
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-radio-rounded">
                                    <input type="radio" class="custom-control-input" id="typeRadio_4" name="typeRadio" value="4" required>
                                    <label class="custom-control-label" for="typeRadio_4">
                                        原住民。
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-radio-rounded">
                                    <input type="radio" class="custom-control-input" id="typeRadio_5" name="typeRadio" value="5" required>
                                    <label class="custom-control-label" for="typeRadio_5">
                                        育有未成年子女三人以上。(限申請人本人)
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-radio-rounded">
                                    <input type="radio" class="custom-control-input" id="typeRadio_6" name="typeRadio" value="6" required>
                                    <label class="custom-control-label" for="typeRadio_6">
                                        特殊境遇家庭。
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-radio-rounded">
                                    <input type="radio" class="custom-control-input" id="typeRadio_7" name="typeRadio" value="7" required>
                                    <label class="custom-control-label" for="typeRadio_7">
                                        於安置教養機構或寄養家庭結束安置無法返家，未滿二十五歲。(限申請人本人)
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-radio-rounded">
                                    <input type="radio" class="custom-control-input" id="typeRadio_8" name="typeRadio" required>
                                    <label class="custom-control-label" for="typeRadio_8">
                                        受家庭暴力或性侵害之受害者及其子女。
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-radio-rounded">
                                    <input type="radio" class="custom-control-input" id="typeRadio_9" name="typeRadio" value="9" required>
                                    <label class="custom-control-label" for="typeRadio_9">
                                        身心障礙者。
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-radio-rounded">
                                    <input type="radio" class="custom-control-input" id="typeRadio_10" name="typeRadio" value="10" required>
                                    <label class="custom-control-label" for="typeRadio_10">
                                        感染人類免疫缺乏病毒者或罹患後天免疫缺乏症候群者。
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-radio-rounded">
                                    <input type="radio" class="custom-control-input" id="typeRadio_11" name="typeRadio" value="11" required>
                                    <label class="custom-control-label" for="typeRadio_11">
                                        因懷孕或生育而遭遇困境之未成年人。(限申請人本人)
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-radio-rounded">
                                    <input type="radio" class="custom-control-input" id="typeRadio_12" name="typeRadio" value="12" required>
                                    <label class="custom-control-label" for="typeRadio_12">
                                        災民。
                                    </label>
                                </div>
                                <div class="custom-control custom-radio custom-radio-rounded">
                                    <input type="radio" class="custom-control-input" id="typeRadio_13" name="typeRadio" required>
                                    <label class="custom-control-label" for="typeRadio_13">
                                        遊民。
                                    </label>
                                </div>
                            </div>
                            <div class="panel-tag">
                                二類
                            </div>
                            <div class="form-group">
                                <div class="frame-wrap padding-top-ten">
                                    <div class="custom-control custom-radio custom-radio-rounded">
                                        <input type="radio" class="custom-control-input" id="typeRadio_14" name="typeRadio" value="14" required>
                                        <label class="custom-control-label" for="typeRadio_14">
                                            低收入戶。
                                        </label>
                                    </div>
                                    <div class="custom-control custom-radio custom-radio-rounded">
                                        <input type="radio" class="custom-control-input" id="typeRadio_15" name="typeRadio" value="15" required>
                                        <label class="custom-control-label" for="typeRadio_15">
                                            中低收入戶。
                                        </label>
                                        <div class="invalid-feedback">
                                            請選擇身分
                                        </div>
                                    </div>
                                </div>
                            </div>

                            @*上傳弱勢戶佐證文件*@
                            <div class="form-group">
                                <label class="form-label">上傳弱勢戶佐證文件</label>
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="vulnerablefile" name="vulnerablefile" multiple disabled>
                                    <label id="vulnerablefileLable" class="custom-file-label" for="vulnerablefile">選擇檔案</label>
                                    <div class="invalid-feedback">
                                        請上傳弱勢戶佐證文件
                                    </div>
                                </div>
                                <span class="help-block pl-2">*<code>&lt;上傳弱勢戶佐證文件&gt;</code></span>
                            </div>

                            @*上傳300E試算表的截圖*@
                            <div class="form-group">
                                <label class="form-label">上傳300億試算表截圖</label>
                                <div class="custom-file">
                                    <input type="file" class="custom-file-input" id="sheetfile" name="sheetfile" multiple required>
                                    <label id="taxFileLable" class="custom-file-label" for="sheetfile">選擇檔案</label>
                                    <div class="invalid-feedback">
                                        請上傳試算表
                                    </div>
                                </div>
                                <span class="help-block pl-2">*<code>&lt;上傳300億試算表截圖&gt;</code></span>
                            </div>

                            @*房客姓名*@
                            <div class="form-group">
                                <label class="form-label" for="Name_0">房客姓名</label>
                                <input type="text" id="Name_0" name="Name_0" class="form-control" required>
                                <div class="invalid-feedback">
                                    請輸入房客姓名
                                </div>
                            </div>
                            @*性別*@
                            <div class="form-group">
                                <label class="form-label">
                                    性別:
                                    <span class="text-danger">*</span>
                                </label>
                                <div class="frame-wrap padding-top-ten">
                                    <div class="custom-control custom-radio custom-control-inline custom-radio-rounded">
                                        <input type="radio" class="custom-control-input" id="genderRadio_0_1" name="genderRadio_0" value="1" required>
                                        <label class="custom-control-label" for="genderRadio_0_1">男</label>
                                    </div>
                                    <div class="custom-control custom-radio custom-control-inline custom-radio-rounded">
                                        <input type="radio" class="custom-control-input" id="genderRadio_0_0" name="genderRadio_0" value="0" required>
                                        <label class="custom-control-label" for="genderRadio_0_0">女</label>
                                        <div class="invalid-feedback">
                                            請選擇房東性別
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @*出生年月日*@
                            <div class="form-group">
                                <label class="form-label" for="birthday">生日</label>
                                <div class="col-md-8 col-lg-6 mb-3 pl-0">
                                    <div class="input-group w-100">
                                        <div class="input-group-append">
                                            <span class="input-group-text">民國</span>
                                        </div>
                                        <input type="number" class="form-control" max="@(Convert.ToInt32(DateTime.Now.Year)-1911)" min="1" id="birthdayYear_0" required>
                                        <div class="input-group-append">
                                            <span class="input-group-text">年</span>
                                        </div>
                                        <input type="number" class="form-control birthdayMonth" max="12" min="1" id="birthdayMonth_0" data-index="0" required>
                                        <div class="input-group-append">
                                            <span class="input-group-text">月</span>
                                        </div>
                                        <input type="number" class="form-control birthdayDay" max="31" min="1" id="birthdayDay_0" data-index="0" required>
                                        <div class="input-group-append">
                                            <span class="input-group-text">日</span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <input type="text" id="birthday_0" name="birthday_0" hidden>

                            @*身分證字號*@
                            <div class="form-group">
                                <label class="form-label" for="IDnumber">身分證字號</label>
                                <div class="row pb-2">
                                    <div class="col-12">
                                        <div class="custom-control custom-checkbox custom-control-inline">
                                            <input type="checkbox" class="custom-control-input national_check" id="international_IDnumber_0" name="international_IDnumber_0" data-index="0">
                                            <label class="custom-control-label" for="international_IDnumber_0">外籍</label>
                                        </div>
                                    </div>
                                </div>
                                <input type="text" class="form-control inputIDnumber" id="IDNumber_0" name="IDNumber_0" data-index="0" pattern="^[A-Z]\d{9}$" required>
                                <div class="invalid-feedback">
                                    請輸入身分證字號，並確認格式為【1個英文字母+9個數字】 (ex.A123456789)
                                </div>
                            </div>
                            @*連絡電話*@
                            <div class="form-group">
                                <label class="form-label" for="phonenumber">連絡電話</label>
                                <input type="text" class="form-control inputPhoneNumber" id="Phone_0" name="Phone_0" data-index="0" pattern="^\d{10}$" required>
                                <div class="invalid-feedback">
                                    請輸入連絡電話，並確認格式為【10個數字】
                                </div>
                            </div>
                            @*戶籍地址*@
                            <div class="form-group">
                                <label class="form-label">戶籍地址</label>
                                <span class="text-danger">*</span>
                                <div class="row">
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_city" data-index="0" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇縣/市
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_district" data-index="0" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇鄉/鎮/市/區
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_road" name="addressroad_0" data-index="0" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇街/路
                                        </div>
                                    </div>
                                </div>
                                <div class="row pt-2">
                                    <div class="col-12">
                                        <input type="text" name="AddressDetail_0" class="form-control" placeholder="ex.108號1樓" required>
                                    </div>
                                </div>
                            </div>
                            @*戶號*@
                            <div class="form-group">
                                <div class="input-group">
                                    <div class="input-group-prepend">
                                        <span class="input-group-text">戶號</span>
                                    </div>
                                    <input type="text" placeholder="" class="form-control" id="accountnumber" name="accountnumber" required>
                                    <div class="invalid-feedback">
                                        請填寫戶號
                                    </div>
                                </div>
                            </div>
                            @*通訊地址*@
                            <div class="form-group">
                                <div class="row pb-2">
                                    <div class="col-12">
                                        <div class="custom-control custom-checkbox custom-control-inline">
                                            <input type="checkbox" class="custom-control-input sameaddress" id="sameaddress_check_0" name="sameaddress_check_0" data-index="1" value="true">
                                            <label class="custom-control-label" for="sameaddress_check_0">同戶籍地址</label>
                                        </div>
                                    </div>
                                </div>
                                <label class="form-label">通訊地址</label>
                                <span class="text-danger">*</span>
                                <div class="row">
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_city select_contact_1" data-index="1" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇縣/市
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_district select_contact_1" data-index="1" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇鄉/鎮/市/區
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_road select_contact_1" name="contactroad_0" data-index="1" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇街/路
                                        </div>
                                    </div>
                                </div>
                                <div class="row pt-2">
                                    <div class="col-12">
                                        <input type="text" class="form-control select_contact_1" name="detailcontact_0" data-index="1" placeholder="ex.108號1樓" required>
                                    </div>
                                </div>
                            </div>

                            @*銀行*@
                            <div class="form-group">
                                <label class="form-label">銀行/銀行代碼</label>
                                <span class="text-danger">*</span>
                                <div class="row">
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_bank" name="bank_0" data-index="1" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇銀行/銀行代碼
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_bankbranches" id="bankbranche_0" name="bankbranche_0" data-index="1" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇分行/分行代碼
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="banknumber">帳號</label>
                                <label class="form-label" id="jqlengthalert" for="banknumber"></label>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">帳號</span>
                                            </div>
                                            <input type="text" id="bankaccount_0" name="bankaccount_0" class="form-control" required>
                                            <div class="invalid-feedback" id="banknumberalert">
                                                請填寫帳號
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            //配偶
                            <div class="panel-tag" style="padding-bottom:0px; margin-bottom:0px;">
                                <div class="row pl-3 pb-2">
                                    <label>配偶</label>
                                    <div class="custom-control custom-checkbox" style="margin-left:10px;">
                                        <input type="checkbox" class="custom-control-input" id="couplecheck_1" name="couplecheck_1" value="true">
                                        <label class="custom-control-label" for="couplecheck_1"></label>
                                    </div>
                                    <label>丈夫</label>
                                    <div class="custom-control custom-checkbox" style="margin-left:10px;">
                                        <input type="checkbox" class="custom-control-input" id="couplecheck_0" name="couplecheck_0" value="true">
                                        <label class="custom-control-label" for="couplecheck_0"></label>
                                    </div>
                                    <label>妻子</label>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label pt-3" for="couplename">基本資料</label>
                                <div class="row pb-2">
                                    <div class="col-12">
                                        <div class="custom-control custom-checkbox custom-control-inline">
                                            <input type="checkbox" class="custom-control-input national_check couple_input_disable" id="international_IDnumber99" name="international_IDnumber99" data-index="99" disabled>
                                            <label class="custom-control-label" for="international_IDnumber99">外籍</label>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-md-10 col-lg-6 pl-0">
                                    <div class="input-group input-group-multi-transition w-100">
                                        <div class="input-group-append">
                                            <span id="couplename" class="input-group-text">姓名</span>
                                        </div>
                                        <input type="text" class="form-control couple_input" id="coupleName" name="coupleName" disabled>
                                        <div class="input-group-append">
                                            <span class="input-group-text">身分證</span>
                                        </div>
                                        <input type="text" class="form-control couple_input inputIDnumber" id="coupleNumber" name="coupleNumber" data-index="99" pattern="^[A-Z]\d{9}$" disabled>
                                        <div class="invalid-feedback">
                                            請輸入身分證字號，並確認格式為【1個英文字母+9個數字】 (ex.A123456789)
                                        </div>
                                    </div>
                                </div>
                                <div class="form-group pt-3">
                                    <label class="form-label" for="birthday">生日</label>
                                    <div class="col-md-8 col-lg-6 mb-3 pl-0">
                                        <div class="input-group w-100">
                                            <div class="input-group-append">
                                                <span class="input-group-text">民國</span>
                                            </div>
                                            <input type="number" class="form-control couple_input" max="@(Convert.ToInt32(DateTime.Now.Year)-1911)" min="1" id="birthdayYear_99">
                                            <div class="input-group-append">
                                                <span class="input-group-text">年</span>
                                            </div>
                                            <input type="number" class="form-control birthdayMonth couple_input" max="12" min="1" id="birthdayMonth_99" data-index="99">
                                            <div class="input-group-append">
                                                <span class="input-group-text">月</span>
                                            </div>
                                            <input type="number" class="form-control birthdayDay couple_input" max="31" min="1" id="birthdayDay_99" data-index="99">
                                            <div class="input-group-append">
                                                <span class="input-group-text">日</span>
                                            </div>
                                        </div>
                                    </div>
                                    <input type="text" id="coupleInput" name="coupleInput" hidden>
                                </div>
                            </div>
                            @*分戶戶號*@
                            <div class="form-group">
                                <div class="row d-flex align-items-end">
                                    <div class="col-md-4">
                                        <div class="custom-control custom-checkbox custom-control-inline mb-2">
                                            <input type="checkbox" class="custom-control-input couple_input_disable" id="separatecheck" name="separatecheck" value="true" disabled>
                                            <label class="custom-control-label" for="separatecheck">是否分戶</label>
                                        </div>
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">分戶戶號</span>
                                            </div>
                                            <input type="text" class="form-control" id="saparatenumber" name="saparatenumber" disabled>
                                            <div class="invalid-feedback">
                                                請填寫分戶戶號
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            //直系親屬
                            <div class="panel-tag">
                                直系親屬
                            </div>
                            @Html.Partial("_TenantDirectfamily", "Form")
                            <div class="row">
                                <button type="button" class="btn btn-dark waves-effect waves-themed ml-3 mb-2 shipbutton" data-order="0" onclick="changeship(this, 'delete')">刪除</button>
                                <button type="button" class="btn btn-dark waves-effect waves-themed ml-1 mb-2 shipbutton" data-order="0" onclick="changeship(this, 'create')">新增直系親屬</button>

                            </div>
                            //代理人
                            <div class="panel-tag">
                                代理人
                            </div>
                            @Html.Partial("_TenantAgent", "Form")
                            //代理人
                            <div class="panel-tag">
                                保證人
                            </div>
                            @Html.Partial("_TenantGuarantor", "Form")

                            <!--備註欄-->
                            <div class="form-group">
                                <label class="form-label" for="example-textarea">備註</label>
                                <textarea class="form-control" id="momo" name="memo" rows="5" style="height: 122px;"></textarea>
                            </div>
                            <div class="panel-content border-faded border-left-0 border-right-0 border-bottom-0 d-flex flex-row align-items-center">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="invalidCheck" required="">
                                    <label class="custom-control-label" for="invalidCheck">確認填寫完成 <span class="text-danger">*</span></label>
                                    <div class="invalid-feedback">
                                        您必須選擇此區塊以確認完成填寫
                                    </div>
                                </div>
                                <button class="btn btn-primary ml-auto waves-effect waves-themed" type="submit">送出</button>
                            </div>

                        }

                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

@section scripts
{
    @*select2*@
    @*<script src="~/Content/select2/js/select2.min.js"></script>*@
    <script src="~/Content/smartadmin-package-4.5.1/smartadmin-html-full/dist/js/formplugins/select2/select2.bundle.js"></script>
    @*sweetalert2*@
    <script src="~/Content/sweetalert2/sweetalert2.min.js"></script>
    @*datepicker*@
    <script src="~/Content/smartadmin-package-4.5.1/smartadmin-html-full/dist/js/formplugins/bootstrap-datepicker/bootstrap-datepicker.js"></script>
    @*inputmask*@
    @*<script src="~/Content/smartadmin-package-4.5.1/smartadmin-html-full/dist/js/formplugins/inputmask/inputmask.bundle.js"></script>*@

<script type="text/javascript">
        //validation
        // Example starter JavaScript for disabling form submissions if there are invalid fields
        (function () {
            'use strict';
            window.addEventListener('load', function () {
                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                var forms = document.getElementsByClassName('needs-validation');
                // Loop over them and prevent submission
                var validation = Array.prototype.filter.call(forms, function (form) {
                    form.addEventListener('submit', function (event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        else {
                            //打包房客生日
                            const Year_0 = parseInt($("#birthdayYear_0").val()) + 1911;
                            var Month_0 = $("#birthdayMonth_0").val();
                            var Day_0 = $("#birthdayDay_0").val();
                            const birth_0 = Year_0.toString() + '-' + Month_0 + '-' + Day_0;
                            $("#birthday_0").val(birth_0)

                            //打包配偶資料
                            if ($("#couplecheck_0").is(":checked") || $("#couplecheck_1").is(":checked")) {
                                const dataArray = [];
                                //性別
                                var genderCouple = -1;
                                genderCouple = ($("#couplecheck_0").is(":checked")) ? 0 : 1;
                                //姓名
                                var nameCouple = $("#coupleName").val();
                                //身分證
                                var coupleNumber = $("#coupleNumber").val();
                                //生日
                                const Year_couple = parseInt($("#birthdayYear_99").val()) + 1911;
                                var Month_couple = $("#birthdayMonth_99").val();
                                var Day_couple = $("#birthdayDay_99").val();
                                const birthdayCouple = Year_couple.toString() + '-' + Month_couple + '-' + Day_couple;
                                //分戶戶號
                                var saparatenumber = $('#saparatenumber').val();

                                dataArray.push(genderCouple)
                                dataArray.push(nameCouple);
                                dataArray.push(coupleNumber);
                                dataArray.push(birthdayCouple);
                                dataArray.push(saparatenumber);
                                const jsonResult = JSON.stringify(dataArray);
                                $('#coupleInput').val(jsonResult);
                            }

                            //打包直系親屬
                            //取得有幾位親屬
                            var i = 0;
                            var directcount = parseInt($("#directCount").val());
                            for (i = 1; i <= directcount; i++) {
                                const index = i;
                                const strindex = index.toString();
                                //設一儲存陣列
                                const dataArray = [];
                                const Ship = document.getElementById(`shipSelect_` + strindex).value;
                                const Name = document.getElementById(`Name_Di` + strindex).value;
                                const IDNumber = document.getElementById(`IDnumber_Di` + strindex).value;
                                const Year = parseInt(document.getElementById(`birthdayYear_` + strindex).value) + 1911;
                                const Month = document.getElementById(`birthdayMonth_` + strindex).value;
                                const Day = document.getElementById(`birthdayDay_` + strindex).value;
                                const Birthday = Year.toString() + '-' + Month + '-' + Day;

                                dataArray.push(Ship)
                                dataArray.push(Name);
                                dataArray.push(IDNumber);
                                dataArray.push(Birthday);
                                const jsonResult = JSON.stringify(dataArray);
                                $('#directInput' + strindex).val(jsonResult);
                            }

                            //打包代理人資料
                            //取得幾位代理人
                            var AgentRadioElement = document.getElementsByName("AgentRadio");
                            var agentcount;
                            for (i = 0 ; i < AgentRadioElement.length; i++) {
                                if (AgentRadioElement[i].checked) {
                                    agentcount = AgentRadioElement[i].value;
                                    break;  //找到選中的值，跳出循環
                                }
                            }
                            for (i = 1; i <= parseInt(agentcount); i++) {
                                const index = i + 10;
                                const strindex = index.toString();
                                const dataArray = [];
                                //姓名
                                const Name = document.getElementById(`Name_Ag` + strindex).value;
                                //性別
                                var genderRadioElement = document.getElementsByName("genderRadio_Ag" + strindex);
                                var genderValue;
                                for (var j = 0; j < genderRadioElement.length; j++) {
                                    if (genderRadioElement[j].checked) {
                                        genderValue = genderRadioElement[j].value;
                                        break;  //找到選中的值，跳出循環
                                    }
                                }
                                //生日
                                const Year = parseInt(document.getElementById(`birthdayYear_` + strindex).value) + 1911;
                                const Month = document.getElementById(`birthdayMonth_` + strindex).value;
                                const Day = document.getElementById(`birthdayDay_` + strindex).value;
                                const Birthday = Year.toString() + '-' + Month + '-' + Day;
                                //身分證
                                const IDNumber = document.getElementById(`IDnumber_Ag` + strindex).value;
                                //電話
                                const Phone = document.getElementById(`Phone_Ag` + strindex).value;
                                //地址
                                const Road = document.getElementById(`road_Ag` + strindex).value;
                                const AddressDetail = document.getElementById(`AddressDetail_Ag` + strindex).value;
                                //通訊地址
                                const sameaddresscheck = document.getElementById('sameaddresscheck_Ag' + strindex);
                                var Contact = Road;
                                var detailContact = AddressDetail;
                                if (sameaddresscheck) {
                                    if (!sameaddresscheck.checked) {
                                        Contact = document.getElementById(`road_contact_Ag` + strindex).value;
                                        detailContact = document.getElementById(`detailcontact_Ag` + strindex).value;
                                    }
                                }
                                dataArray.push(Name);
                                dataArray.push(genderValue);
                                dataArray.push(Birthday);
                                dataArray.push(IDNumber);
                                dataArray.push(Phone);
                                dataArray.push(Road);
                                dataArray.push(AddressDetail);
                                dataArray.push(Contact);
                                dataArray.push(detailContact);
                                const jsonResult = JSON.stringify(dataArray);
                                $('#AgentInput' + strindex).val(jsonResult);
                            }

                            //打包保證人資料
                            //取得幾位保證人
                            var GuarantorRadioElement = document.getElementsByName("GuarantorRadio");
                            var gurantorcount;
                            for (i = 0; i < GuarantorRadioElement.length; i++) {
                                if (GuarantorRadioElement[i].checked) {
                                    gurantorcount = GuarantorRadioElement[i].value;
                                    break;  //找到選中的值，跳出循環
                                }
                            }
                            for (i = 1; i <= parseInt(gurantorcount); i++) {
                                const index = i + 20;
                                const strindex = index.toString();
                                const dataArray = [];
                                 //姓名
                                const Name = document.getElementById(`Name_Gu` + strindex).value;
                                //性別
                                var genderRadioElement = document.getElementsByName("genderRadio_Gu" + strindex);
                                var genderValue;
                                for (j = 0; j < genderRadioElement.length; j++) {
                                    if (genderRadioElement[j].checked) {
                                        genderValue = genderRadioElement[j].value;
                                        break;  //找到選中的值，跳出循環
                                    }
                                }
                                //生日
                                const Year = parseInt(document.getElementById(`birthdayYear_` + strindex).value) + 1911;
                                const Month = document.getElementById(`birthdayMonth_` + strindex).value;
                                const Day = document.getElementById(`birthdayDay_` + strindex).value;
                                const Birthday = Year.toString() + '-' + Month + '-' + Day;
                                //身分證
                                const IDNumber = document.getElementById(`IDnumber_Gu` + strindex).value;
                                //電話
                                const Phone = document.getElementById(`Phone_Gu` + strindex).value;
                                //地址
                                const Road = document.getElementById(`road_Gu` + strindex).value;
                                const AddressDetail = document.getElementById(`AddressDetail_Gu` + strindex).value;
                                //通訊地址
                                const sameaddresscheck = document.getElementById('sameaddress_Gu' + strindex);
                                var Contact = Road;
                                var detailContact = AddressDetail;
                                if (sameaddresscheck) {
                                    if (!sameaddresscheck.checked) {
                                        Contact = document.getElementById(`road_contact_Gu` + strindex).value;
                                        detailContact = document.getElementById(`detailcontact_Gu` + strindex).value;
                                    }
                                }
                                dataArray.push(Name);
                                dataArray.push(genderValue);
                                dataArray.push(Birthday);
                                dataArray.push(IDNumber);
                                dataArray.push(Phone);
                                dataArray.push(Road);
                                dataArray.push(AddressDetail);
                                dataArray.push(Contact);
                                dataArray.push(detailContact);
                                const jsonResult = JSON.stringify(dataArray);
                                $('#GuarantorInput' + strindex).val(jsonResult);
                            }

                        }
                        form.classList.add('was-validated');

                    }, false);

                });
            }, false);
        })();

        $(function () {
            //inputmask
            //$(":input").inputmask();

            //將不需填寫的資料先隱藏
            //直系親屬
            $('.directformgroup[data-order="' + 1 + '"]').hide();
            $('.directformgroup[data-order="' + 2 + '"]').hide();
            $('.directformgroup[data-order="' + 3 + '"]').hide();
            $('.directformgroup[data-order="' + 4 + '"]').hide();
            $('.directformgroup[data-order="' + 5 + '"]').hide();
            $('.directformgroup[data-order="' + 6 + '"]').hide();
            $('.directformgroup[data-order="' + 7 + '"]').hide();
            $('.directformgroup[data-order="' + 8 + '"]').hide();
            $('.directformgroup[data-order="' + 9 + '"]').hide();
            $('.directformgroup[data-order="' + 10 + '"]').hide();
            //代理人
            $('.getag1').hide();
            $('.getag2').hide();
            $('.getag3').hide();
            //保證人
            $('.getgu1').hide();
            $('.getgu2').hide();
            $('.getgu3').hide();
            //------------------
            // 物件地址下拉選單  *
            //------------------
            var jsonCity = @Html.Raw(Json.Encode(ViewBag.citylist));
            var jsonAddressArray = JSON.parse(jsonCity);

            for (var i = 0; i < jsonAddressArray.length; i++) {
                jsonAddressArray[i].id = jsonAddressArray[i].id.replace(/\"/g, '');
                jsonAddressArray[i].text = jsonAddressArray[i].text.replace(/\"/g, '');
            }

            var data_city = jsonAddressArray;
            $('.select2_city').select2({
                data: data_city,
                placeholder: '縣/市'
            });
            $('.select2_district').select2({
                //data: data_district,
                placeholder: '鄉/鎮/市/區',
            });
            $('.select2_road').select2({
                //data: data_road,
                placeholder: '街道',
            });
            //------------------
            // 銀行下拉選單  *
            //------------------
            var jsonBank = @Html.Raw(Json.Encode(ViewBag.banklist));
            var jsonBankArray = JSON.parse(jsonBank);

            //for (var i = 0; i < jsonBankArray.length; i++) {
            //    jsonBankArray[i].id = jsonBankArray[i].id.replace(/\"/g, '');
            //    jsonBankArray[i].text = jsonBankArray[i].text.replace(/\"/g, '');
            //}
            var data_bank = jsonBankArray;
            $(".select2_bank").select2({
                data: data_bank,
                placeholder: '銀行'
            })
            $(".select2_bankbranches").select2({
                placeholder: '分行'
            })

            //銀行下拉選單
            //判斷是否為第一次載入頁面
            var isFirstLoad_Bank = true;
            $('body').on('change', '.select2_bank', function () {
                var selectedIndex = $(this).attr('data-index');
                var bankcode = $('.select2_bank[data-index="' + selectedIndex + '"]').val();
                $.ajax({
                    type: "POST",
                    data: { bankcode: bankcode },
                    url: '@Url.Content("~/Form/DDLBank/")',
                    dataType: 'json'
                }).done(function (dataresult) {
                    var jsonBankBranchArray = JSON.parse(dataresult.bankJson);
                    for (var i = 0; i < jsonBankBranchArray.length; i++) {
                            jsonBankBranchArray[i].id = jsonBankBranchArray[i].id.replace(/\"/g, '');
                            jsonBankBranchArray[i].text = jsonBankBranchArray[i].text.replace(/\"/g, '');
                        }
                    var data_bankbranch = jsonBankBranchArray;
                    $('.select2_bankbranches[data-index="' + selectedIndex + '"]').empty();
                    var init_data = [
                        {
                            id: '',
                            text: '分行'
                        },
                    ];
                    $('.select2_bankbranches[data-index="' + selectedIndex + '"]').select2({
                        data: init_data,
                    });
                    $('.select2_bankbranches[data-index="' + selectedIndex + '"]').select2({
                        data: data_bankbranch,
                        placeholder: '分行'
                    });
                    //------------------
                    // 編輯模式
                    //------------------
                    if ('@FormID' !== '') {
                        if (isFirstLoad_Bank) {
                            //分行代碼
                            var BrancheNo = '@BrancheNo';
                            $('#bankbranche_0').val(BrancheNo).trigger('change');
                            isFirstLoad_Bank = false;
                        }
                    }
                    //設定帳號長度
                    var inputbanknumberElement = document.getElementById('bankaccount_0');
                    var alertelement = document.getElementById('banknumberalert');
                    var lengthalert = document.getElementById('jqlengthalert');
                    if (dataresult.lengthset.length === 0) {
                        //非兩種長度以上
                        var length = "";
                        if (dataresult.minlength == dataresult.maxlength) {
                            length = dataresult.minlength + "字";
                        }
                        else {
                            length = dataresult.minlength + "字 ~" + dataresult.maxlength + "字"
                        }

                        alertelement.innerHTML = "請正確輸入帳號，帳號長度數請填寫 : " + length;
                        inputbanknumberElement.setAttribute('pattern', '.{' + dataresult.minlength + ',' + dataresult.maxlength + '}');
                        lengthalert.innerHTML = "(" + length + ")"
                    }
                    else {
                        // 將陣列中的數字轉換成以 | 分隔的字串
                        var regexPattern = dataresult.lengthset.map(length => `.{${length}}`).join('|');
                        var regexword = dataresult.lengthset.join('字,') + "字";

                        alertelement.innerHTML = "請正確輸入帳號，帳號長度數請填寫 : " + regexword;
                        inputbanknumberElement.setAttribute('pattern', regexPattern);
                        lengthalert.innerHTML = "(" + regexword + ")"

                    }
                });
            });
            //直系親屬下拉選單(嬰幼兒不需填身分證)
            $('body').on('change', '.select_direct', function () {
                var selectedIndex = $(this).attr('data-order');
                //選擇親屬關係之代號
                var directcode = $('.select_direct[data-order="' + selectedIndex + '"]').val();
                if (directcode == "胎兒") {
                    const checkbox = document.getElementById('international_Direct_IDnumber' + selectedIndex);
                    checkbox.checked = false;
                    $('#international_Direct_IDnumber' + selectedIndex).prop('disabled', true);         //不須勾選外籍
                    $('.inputIDnumber[data-order="' + selectedIndex + '"]').prop('disabled', true);     //身分證不須填
                    $('.inputIDnumber[data-order="' + selectedIndex + '"]').prop('required', false);    //身分證不須填
                }
                else {
                    $('#international_Direct_IDnumber' + selectedIndex).prop('disabled', false);        //可勾選外籍
                    $('.inputIDnumber[data-order="' + selectedIndex + '"]').prop('disabled', false);    //身分證須填
                    $('.inputIDnumber[data-order="' + selectedIndex + '"]').prop('required', true);     //身分證須填
                }
            });

            //主要用途 : 弱勢戶佐證文件是否需要上傳
            $('input[name="typeRadio"]').change(function () {
                // 獲取被點選的 radio 按鈕的值
                var vulnerablefile = document.getElementById('vulnerablefile');
                var filelable = document.getElementById('vulnerablefileLable');
                $('input[name="typeRadio"]').each(function () {
                    var radioId = $(this).attr('id');
                    // 檢查是否被點選
                    if ($(this).is(':checked')) {
                        switch (radioId) {
                            case 'typeRadio_0' :
                            case 'typeRadio_1' :
                            case 'typeRadio_2' :
                            case 'typeRadio_3' :
                            case 'typeRadio_4' :
                            case 'typeRadio_5' :
                                vulnerablefile.value = '';
                                filelable.innerHTML = '';
                                $('#vulnerablefile').prop('disabled', true);
                                $('#vulnerablefile').prop('readonly', true);
                                $('#vulnerablefile').prop('required', false);
                                break;
                            default:
                                $('#vulnerablefile').prop('disabled', false);
                                $('#vulnerablefile').prop('readonly', false);
                                $('#vulnerablefile').prop('required', true);
                                break;
                        }
                    }
                })
            });

            //同戶籍地址
            $('.sameaddress').on('change', function () {
                var selectedIndex = $(this).attr('data-index');
                if ($(this).is(':checked')) {
                    $('.select_contact_' + selectedIndex).prop('disabled', true);
                    //required
                    $('.select_contact_' + selectedIndex).prop('required', false);
                } else {
                    $('.select_contact_' + selectedIndex).prop('disabled', false);
                    //required
                    $('.select_contact_' + selectedIndex).prop('required', true);
                }
            });

            //是否有配偶(丈夫)
            $('#couplecheck_1').on('change', function () {
                if ($(this).is(':checked')) {
                    //妻子nochecked
                    const checkbox = document.getElementById('couplecheck_0');
                    checkbox.checked = false;
                    $('.couple_input').prop('disabled', false);
                    $('.couple_input_disable').prop('disabled', false);
                    $('.couple_input').prop('required', true);
                } else {
                    $('.couple_input').prop('disabled', true);
                    $('.couple_input_disable').prop('disabled', true);
                    $('.couple_input').prop('required', false);
                    //身分證
                    const IDcheckbox = document.getElementById('international_IDnumber99');
                    IDcheckbox.checked = false;
                    IDcheckbox.prop('disabled', true);
                    //分戶
                    const checkbox = document.getElementById('separatecheck');
                    checkbox.checked = false;
                    $('input[name="saparatenumber"]').val('');
                    $('input[name="saparatenumber"]').prop('disabled', true);
                    $('input[name="saparatenumber"]').prop('required', false);
                }
            });
            //是否有配偶(妻子)
            $('#couplecheck_0').on('change', function () {
                if ($(this).is(':checked')) {
                    //丈夫nochecked
                    const checkbox = document.getElementById('couplecheck_1');
                    checkbox.checked = false;
                    $('.couple_input').prop('disabled', false);
                    $('.couple_input_disable').prop('disabled', false);
                    $('.couple_input').prop('required', true);
                } else {

                    $('.couple_input').prop('disabled', true);
                    $('.couple_input_disable').prop('disabled', true);
                    $('.couple_input').prop('required', false);
                    //身分證
                    const IDcheckbox = document.getElementById('coupleNumber');
                    IDcheckbox.checked = false;
                    $('input[name="saparatenumber"]').prop('disabled', true);
                    //分戶
                    const checkbox = document.getElementById('separatecheck');
                    checkbox.checked = false;
                    $('input[name="saparatenumber"]').val('');
                    $('input[name="saparatenumber"]').prop('disabled', true);
                    $('input[name="saparatenumber"]').prop('required', false);
                }
            });

            //是否為外籍(身分證不須驗證)
            $('.national_check').on('change', function () {
                var selectedIndex = $(this).attr('data-index');

                const inputElement = document.querySelector('.inputIDnumber[data-index="' + selectedIndex + '"]');
                if ($(this).is(':checked')) {
                    inputElement.removeAttribute('pattern');
                } else {
                    inputElement.setAttribute('pattern', '^[A-Z]\\d{9}$');
                }
            });

            //是否分戶
            $('#separatecheck').on('change', function () {
                if ($(this).is(':checked')) {
                    //disabled
                    $('input[name="saparatenumber"]').prop('disabled', false);
                    //required
                    $('input[name="saparatenumber"]').prop('required', true);
                } else {
                    //value
                    $('input[name="saparatenumber"]').val('');
                    //disabled
                    $('input[name="saparatenumber"]').prop('disabled', true);
                    //required
                    $('input[name="saparatenumber"]').prop('required', false);
                }
            });

            //直系親屬(下拉選單)
            var dataDirect = [
                { id: '父親', text: '父親' },
                { id: '母親', text: '母親' },
                { id: '兒子', text: '兒子' },
                { id: '女兒' , text: '女兒' },
                { id: '媳婦', text: '媳婦' },
                { id: '女婿', text: '女婿' },
                { id: '孫子', text: '孫子' },
                { id: '孫女', text: '孫女' },
                { id: '孫媳婦', text: '孫媳婦' },
                { id: '孫女婿', text: '孫女婿' },
                { id: '阿公', text: '阿公' },
                { id: '阿嬤', text: '阿嬤' },
                { id: '爺爺', text: '爺爺' },
                { id: '奶奶', text: '奶奶' },
                { id: '公公', text: '公公' },
                { id: '婆婆', text: '婆婆' },
                { id: '胎兒', text: '胎兒' },
            ];
            $(".select_direct").select2({
                tags: "true",
                data: dataDirect,
                placeholder: '親屬關係'
            })
            //------------------
            // 代理人幾位  *
            //------------------
            //主要用途 : AgentRadio(隱藏/顯示代理人資料)
            $('input[name="AgentRadio"]').change(function () {
                $('input[name="AgentRadio"]').each(function () {
                    var radioId = $(this).attr('id');
                    // 檢查是否被點選
                    if ($(this).is(':checked')) {
                        // 根據不同的 id 做相應的處理
                        switch (radioId) {
                            case "AgentRadio_0":
                                $('.getag1').hide();
                                $('.getag2').hide();
                                $('.getag3').hide();
                                $('.AgInput_1').prop('required', false);
                                $('.AgInput_2').prop('required', false);
                                $('.AgInput_3').prop('required', false);
                                break;
                            case "AgentRadio_1":
                                $('.getag1').show();
                                $('.getag2').hide();
                                $('.getag3').hide();
                                $('.AgInput_1').prop('required', true);
                                $('.AgInput_2').prop('required', false);
                                $('.AgInput_3').prop('required', false);
                                break;
                            case "AgentRadio_2":
                                $('.getag1').show();
                                $('.getag2').show();
                                $('.getag3').hide();
                                $('.AgInput_1').prop('required', true);
                                $('.AgInput_2').prop('required', true);
                                $('.AgInput_3').prop('required', false);
                                break;
                            case "AgentRadio_3":
                                $('.getag1').show();
                                $('.getag2').show();
                                $('.getag3').show();
                                $('.AgInput_1').prop('required', true);
                                $('.AgInput_2').prop('required', true);
                                $('.AgInput_3').prop('required', true);
                                break;
                        }
                    }
                })
            });
            //------------------
            // 保證人幾位  *
            //------------------
            //主要用途 : GuarantorRadio(隱藏/顯示保證人資料)
            $('input[name="GuarantorRadio"]').change(function () {
                $('input[name="GuarantorRadio"]').each(function () {
                    var radioId = $(this).attr('id');
                    // 檢查是否被點選
                    if ($(this).is(':checked')) {
                        // 根據不同的 id 做相應的處理
                        switch (radioId) {
                            case "jqGuarantorRadio_0":
                                $('.getgu1').hide();
                                $('.getgu2').hide();
                                $('.getgu3').hide();
                                $('.GuInput_1').prop('required', false);
                                $('.GuInput_2').prop('required', false);
                                $('.GuInput_3').prop('required', false);
                                break;
                            case "jqGuarantorRadio_1":
                                $('.getgu1').show();
                                $('.getgu2').hide();
                                $('.getgu3').hide();
                                $('.GuInput_1').prop('required', true);
                                $('.GuInput_2').prop('required', false);
                                $('.GuInput_3').prop('required', false);
                                break;
                            case "jqGuarantorRadio_2":
                                $('.getgu1').show();
                                $('.getgu2').show();
                                $('.getgu3').hide();
                                $('.GuInput_1').prop('required', true);
                                $('.GuInput_2').prop('required', true);
                                $('.GuInput_3').prop('required', false);
                                break;
                            case "jqGuarantorRadio_3":
                                $('.getgu1').show();
                                $('.getgu2').show();
                                $('.getgu3').show();
                                $('.GuInput_1').prop('required', true);
                                $('.GuInput_2').prop('required', true);
                                $('.GuInput_3').prop('required', true);
                                break;
                        }
                    }
                })
            });

            //------------------
            // 生日月份變更日期之最大值為30 or31  *
            //------------------
            const inputElements = document.querySelectorAll('.birthdayMonth');
            inputElements.forEach(function (inputElement) {
                inputElement.addEventListener('input', function () {
                    const inputValue = inputElement.value;
                    const dataIndex = inputElement.getAttribute('data-index');
                    if (inputValue == '1' || inputValue == '3' || inputValue == '5' || inputValue == '7' || inputValue == '8' || inputValue == '10' || inputValue == '12') {
                        //$('#birthdayDay_' + dataIndex).attr('max', 31); //設置最大值
                        $('.birthdayDay[data-index="' + dataIndex + '"]').attr('max', 31); //設置最大值
                    }
                    else if (inputValue == '2') {
                        //$('#birthdayDay_' + dataIndex).attr('max', 29); //設置最大值
                        $('.birthdayDay[data-index="' + dataIndex + '"]').attr('max', 29); //設置最大值
                    }
                    else {
                        //$('#birthdayDay_' + dataIndex).attr('max', 30); //設置最大值
                        $('.birthdayDay[data-index="' + dataIndex + '"]').attr('max', 30); //設置最大值
                    }
                    // 在这里执行你的其他操作
                });
            });

            //------------------
            // 編輯模式
            //------------------
            var formid = '@FormID'
            if (formid !== '') {
                $('input[name="FormID"]').val(formid);
                //房客類別
                var TenantType = '@TenantType';
                $('input[name="typeRadio"][value="' + TenantType + '"]').prop('checked', true).trigger('change');;
                //房東姓名
                var Name = '@Name';
                $('input[name="Name_0"]').val(Name);
                //性別
                var Gender = '@Gender';
                $('input[name="genderRadio_0"][value="' + Gender + '"]').prop('checked', true).trigger('change');;
                    //生日
                    var birthdaystr = '@BirthdayStr';
                    var birthpart = birthdaystr.split('-');
                    var birthyear = parseInt(parseInt(birthpart[0])-1911);
                    var birthmonth = parseInt(birthpart[1]);
                    var biirthday = parseInt(birthpart[2]);
                    $('#birthdayYear_0').val(birthyear);
                    $('#birthdayMonth_0').val(birthmonth);
                    $('#birthdayDay_0').val(biirthday);
                //身分證字號(法人-統一編號)
                const IDNumberpattern = /^[A-Z]\d{9}$/;
                var IDNumber = '@IDNumber';
                if (!IDNumberpattern.test(IDNumber)) {
                    $('#international_IDnumber_0').prop('checked', true).trigger('change');
                }
                $('#IDNumber_0').val(IDNumber);
                //電話號碼
                var Phone = '@Phone';
                $('input[name="Phone_0"]').val(Phone);
                //銀行代碼
                var BankNo = '@BankNo';
                $('.select2_bank[data-index="1"]').val(BankNo).trigger('change');

                //銀行帳號
                var BankAccount = '@BankAccount';
                $('input[name="bankaccount_0"]').val(BankAccount);

                var memo = '@memo';
                if (memo !== '') {
                    $('#momo').val(memo);
                }
                //戶號
                var accountNo = '@accountNo';
                $('#accountnumber').val(accountNo);

                //地址代碼
                //房客地址(下拉選單)
                var TeAddress_District = JSON.parse('@TeAddress_District');
                var TeAddress_Road = JSON.parse('@TeAddress_Road');
                var TeContact_District = JSON.parse('@TeContact_District');
                var TeContact_Road = JSON.parse('@TeContact_Road');
                $('.select2_district[data-index="0"]').empty().select2({ data: TeAddress_District });
                $('.select2_road[data-index="0"]').empty().select2({ data: TeAddress_Road });
                $('.select2_district[data-index="1"]').empty().select2({ data: TeContact_District });
                $('.select2_road[data-index="1"]').empty().select2({ data: TeContact_Road });

                //寫進地址
                var AddressCode = '@AddressCode';
                var AddressDetail = '@AddressDetail';
                $('.select2_city[data-index="0"]').val(AddressCode.substring(0, 2)).trigger('change');
                $('.select2_district[data-index="0"]').val(AddressCode.substring(0, 4)).trigger('change');
                $('.select2_road[data-index="0"]').val(AddressCode).trigger('change');
                $('input[name="AddressDetail_0"]').val(AddressDetail);
                var ContactCode = '@ContactCode';
                var ContactAddressDetail = '@ContactAddressDetail';
                $('.select2_city[data-index="1"]').val(ContactCode.substring(0, 2)).trigger('change');
                $('.select2_district[data-index="1"]').val(ContactCode.substring(0, 4)).trigger('change');
                $('.select2_road[data-index="1"]').val(ContactCode).trigger('change');
                $('input[name="detailcontact_0"]').val(ContactAddressDetail);

                //配偶
                var CoupleCount = parseInt('@CoupleCount');
                if (CoupleCount > 0) {
                    var Couple = JSON.parse('@Couple');
                    $('#couplecheck_' + Couple[0]).prop('checked', true).trigger('change');
                    $('#coupleName').val(Couple[1]);
                    var coupleNumber = Couple[2];
                    $('input[name="coupleNumber"]').val(coupleNumber);
                    if (!IDNumberpattern.test(coupleNumber)) {
                        $('#international_IDnumber99').prop('checked', true).trigger('change');
                    }
                    //生日
                    var Cbirthdaystr = '@BirthdayStr';
                    var Cbirthpart = Cbirthdaystr.split('-');
                    var Cbirthyear = parseInt(parseInt(Cbirthpart[0])-1911);
                    var Cbirthmonth = parseInt(Cbirthpart[1]);
                    var Cbiirthday = parseInt(Cbirthpart[2]);
                    $('#birthdayYear_99').val(Cbirthyear);
                    $('#birthdayMonth_99').val(Cbirthmonth);
                    $('#birthdayDay_99').val(Cbiirthday);
                    var seperateNo = Couple[4];
                    if (seperateNo !== '') {
                        $('#separatecheck').prop('checked', true).trigger('change');
                        $('#saparatenumber').val(seperateNo);
                    }
                }
                //直系親屬
                var Family1 = JSON.parse('@Family1');
                var Family2 = JSON.parse('@Family2');
                var Family3 = JSON.parse('@Family3');
                var Family4 = JSON.parse('@Family4');
                var Family5 = JSON.parse('@Family5');
                var Family6 = JSON.parse('@Family6');
                var Family7 = JSON.parse('@Family7');
                var Family8 = JSON.parse('@Family8');
                var Family9 = JSON.parse('@Family9');
                var Family10 = JSON.parse('@Family10');
                var directArray = [];
                directArray.push(Family1);
                directArray.push(Family2);
                directArray.push(Family3);
                directArray.push(Family4);
                directArray.push(Family5);
                directArray.push(Family6);
                directArray.push(Family7);
                directArray.push(Family8);
                directArray.push(Family9);
                directArray.push(Family10);
                var DirectCount = parseInt('@DirectCount');
                for (var DiInput = 1; DiInput <= DirectCount; DiInput++) {
                    //顯示輸入欄位
                    $('.directformgroup[data-order="' + DiInput + '"]').show();
                    //設定欄位為必填
                    $('.directInput_' + DiInput).prop('required', true);
                    //將人數寫入input欄位
                    $("#directCount").val(DiInput)
                    //將目前人數寫回button中
                    $(".shipbutton").attr('data-order', DiInput);

                    var ArrayNo = DiInput - 1;

                    var data = [
                        { id: directArray[ArrayNo][0], text: directArray[ArrayNo][0] },
                    ];
                    $(".select_direct").select2({
                        tags: "true",
                        data: data,
                        placeholder: '親屬關係'
                    })
                    $('.directInput_' + DiInput + '[data-input="0"]').val(directArray[ArrayNo][0]).trigger('change');   //關係

                    $('.directInput_' + DiInput + '[data-input="1"]').val(directArray[ArrayNo][1]);   //姓名
                    $('.directInput_' + DiInput + '[data-input="2"]').val(directArray[ArrayNo][2]);   //身分證
                    if (!IDNumberpattern.test(directArray[ArrayNo][2])) {
                        $('#international_Direct_IDnumber' + DiInput).prop('checked', true).trigger('change');
                    }
                    var birthparts = directArray[ArrayNo][3].split('-');
                    $('.directInput_' + DiInput + '[data-input="3"]').val(parseInt(birthparts[0]) - 1911);    //生日
                    $('.directInput_' + DiInput + '[data-input="4"]').val(parseInt(birthparts[1]));
                    $('.directInput_' + DiInput + '[data-input="5"]').val(parseInt(birthparts[2]));
                }






                //代理人
                $('input[name="AgentRadio"][value="' + AgentCount + '"]').prop('checked', true).trigger('change');;

                var Agent1 = JSON.parse('@Agent1');
                var Agent2 = JSON.parse('@Agent2');
                var Agent3 = JSON.parse('@Agent3');
                var agentArray = [];
                agentArray.push(Agent1);
                agentArray.push(Agent2);
                agentArray.push(Agent3);

                var AgentCount = parseInt('@AgentCount');       //代理人人數
                $('input[name="AgentRadio"][value="' + AgentCount + '"]').prop('checked', true).trigger('change');;
                for (var AgInput = 1; AgInput <= AgentCount; AgInput++) {
                    var Agent = agentArray[AgInput - 1];
                    var anotherInputNo = AgInput + 10;      //代理人代碼為(10起跳)
                    var birthparts = Agent[2].split('-');
                    var agIDNumber = Agent[3];
                    $('.AgInput_' + AgInput + '[data-input="0"]').val(Agent[0]);   //姓名
                    $('input[name="genderRadio_Ag' + anotherInputNo + '"][value="' + Agent[1] + '"]').prop('checked', true).trigger('change');;     //性別
                    $('.AgInput_' + AgInput + '[data-input="1"]').val(parseInt(birthparts[0]) - 1911);    //生日
                    $('.AgInput_' + AgInput + '[data-input="2"]').val(parseInt(birthparts[1]));
                    $('.AgInput_' + AgInput + '[data-input="3"]').val(parseInt(birthparts[2]));
                    $('.AgInput_' + AgInput + '[data-input="4"]').val(Agent[3]);   //身分證
                    if (!IDNumberpattern.test(agIDNumber)) {
                        $('.national_check[data-index="' + anotherInputNo + '"]').prop('checked', true).trigger('change');
                    }
                    $('.AgInput_' + AgInput + '[data-input="5"]').val(Agent[4]);   //號碼

                    //地址DDL
                    var AgAddress_District;
                    var AgAddress_Road;
                    var AgContact_District;
                    var AgContact_Road;
                    //保證人下拉選單
                    switch (AgInput) {
                        case 1:
                            AgAddress_District = JSON.parse('@AgAddress1_District');
                            AgAddress_Road = JSON.parse('@AgAddress1_Road');
                            AgContact_District = JSON.parse('@AgContact1_District');
                            AgContact_Road = JSON.parse('@AgContact1_Road');
                            break;

                        case 2:
                            AgAddress_District = JSON.parse('@AgAddress2_District');
                            AgAddress_Road = JSON.parse('@AgAddress2_Road');
                            AgContact_District = JSON.parse('@AgContact2_District');
                            AgContact_Road = JSON.parse('@AgContact2_Road');
                            break;

                        case 3:
                            AgAddress_District = JSON.parse('@AgAddress3_District');
                            AgAddress_Road = JSON.parse('@AgAddress3_Road');
                            AgContact_District = JSON.parse('@AgContact3_District');
                            AgContact_Road = JSON.parse('@AgContact3_Road');
                            break;
                    }
                    $('.AgInput_' + AgInput + '[data-input="7"]').empty().select2({ data: AgAddress_District });    //戶籍地址_鄉鎮市區
                    $('.AgInput_' + AgInput + '[data-input="8"]').empty().select2({ data: AgAddress_Road });        //戶籍地址_道路名稱
                    $('.AgInput_' + AgInput + '[data-input="11"]').empty().select2({ data: AgContact_District });   //通訊地址_鄉鎮市區
                    $('.AgInput_' + AgInput + '[data-input="12"]').empty().select2({ data: AgContact_Road });       //通訊地址_道路名稱
                    //寫進地址
                    var Agaddress_code = Agent[5];
                    var Agcontact_code = Agent[7];
                    $('.AgInput_' + AgInput + '[data-input="6"]').val(Agaddress_code.substring(0, 2)).trigger('change');
                    $('.AgInput_' + AgInput + '[data-input="7"]').val(Agaddress_code.substring(0, 4)).trigger('change');
                    $('.AgInput_' + AgInput + '[data-input="8"]').val(Agaddress_code).trigger('change');
                    $('.AgInput_' + AgInput + '[data-input="9"]').val(Agent[6]);      //戶籍地址_詳細地址
                    $('.AgInput_' + AgInput + '[data-input="10"]').val(Agcontact_code.substring(0, 2)).trigger('change');
                    $('.AgInput_' + AgInput + '[data-input="11"]').val(Agcontact_code.substring(0, 4)).trigger('change');
                    $('.AgInput_' + AgInput + '[data-input="12"]').val(Agcontact_code).trigger('change');
                    $('.AgInput_' + AgInput + '[data-input="13"]').val(Agent[8]);      //通訊地址_詳細地址
                }


                //保證人
                var GuarantorCount = parseInt('@GuarantorCount');       //保證人人數
                $('input[name="GuarantorRadio"][value="' + GuarantorCount + '"]').prop('checked', true).trigger('change');
                var Guarantor1 = JSON.parse('@Guarantor1');
                var Guarantor2 = JSON.parse('@Guarantor2');
                var Guarantor3 = JSON.parse('@Guarantor3');
                var GuarantorArray = [];
                GuarantorArray.push(Guarantor1);
                GuarantorArray.push(Guarantor2);
                GuarantorArray.push(Guarantor3);

                for (var GuInput = 1; GuInput <= GuarantorCount; GuInput++) {
                    var Guarantor = GuarantorArray[GuInput - 1];
                    var anotherInputNo = GuInput + 20;      //保證人代碼為(10起跳)
                    var birthparts = Guarantor[2].split('-');
                    var GuIDNumber = Guarantor[3];
                    $('.GuInput_' + GuInput + '[data-input="0"]').val(Guarantor[0]);   //姓名
                    $('input[name="genderRadio_Gu' + anotherInputNo + '"][value="' + Guarantor[1] + '"]').prop('checked', true).trigger('change');;     //性別
                    $('.GuInput_' + GuInput + '[data-input="1"]').val(parseInt(birthparts[0]) - 1911);    //生日
                    $('.GuInput_' + GuInput + '[data-input="2"]').val(parseInt(birthparts[1]));
                    $('.GuInput_' + GuInput + '[data-input="3"]').val(parseInt(birthparts[2]));
                    $('.GuInput_' + GuInput + '[data-input="4"]').val(Guarantor[3]);   //身分證
                    if (!IDNumberpattern.test(GuIDNumber)) {
                        $('.national_check[data-index="' + anotherInputNo + '"]').prop('checked', true).trigger('change');
                    }
                    $('.GuInput_' + GuInput + '[data-input="5"]').val(Guarantor[4]);   //號碼

                    //地址DDL
                    var GuAddress_District;
                    var GuAddress_Road;
                    var GuContact_District;
                    var GuContact_Road;
                    //代理人下拉選單
                    switch (GuInput) {
                        case 1:
                            GuAddress_District = JSON.parse('@GuAddress1_District');
                            GuAddress_Road = JSON.parse('@GuAddress1_Road');
                            GuContact_District = JSON.parse('@GuContact1_District');
                            GuContact_Road = JSON.parse('@GuContact1_Road');
                            break;

                        case 2:
                            GuAddress_District = JSON.parse('@GuAddress2_District');
                            GuAddress_Road = JSON.parse('@GuAddress2_Road');
                            GuContact_District = JSON.parse('@GuContact2_District');
                            GuContact_Road = JSON.parse('@GuContact2_Road');
                            break;

                        case 3:
                            GuAddress_District = JSON.parse('@GuAddress3_District');
                            GuAddress_Road = JSON.parse('@GuAddress3_Road');
                            GuContact_District = JSON.parse('@GuContact3_District');
                            GuContact_Road = JSON.parse('@GuContact3_Road');
                            break;
                    }
                    $('.GuInput_' + GuInput + '[data-input="7"]').empty().select2({ data: GuAddress_District });    //戶籍地址_鄉鎮市區
                    $('.GuInput_' + GuInput + '[data-input="8"]').empty().select2({ data: GuAddress_Road });        //戶籍地址_道路名稱
                    $('.GuInput_' + GuInput + '[data-input="11"]').empty().select2({ data: GuContact_District });   //通訊地址_鄉鎮市區
                    $('.GuInput_' + GuInput + '[data-input="12"]').empty().select2({ data: GuContact_Road });       //通訊地址_道路名稱
                    //寫進地址
                    var Guaddress_code = Guarantor[5];
                    var Gucontact_code = Guarantor[7];
                    $('.GuInput_' + GuInput + '[data-input="6"]').val(Guaddress_code.substring(0, 2)).trigger('change');
                    $('.GuInput_' + GuInput + '[data-input="7"]').val(Guaddress_code.substring(0, 4)).trigger('change');
                    $('.GuInput_' + GuInput + '[data-input="8"]').val(Guaddress_code).trigger('change');
                    $('.GuInput_' + GuInput + '[data-input="9"]').val(Guarantor[6]);      //戶籍地址_詳細地址
                    $('.GuInput_' + GuInput + '[data-input="10"]').val(Gucontact_code.substring(0, 2)).trigger('change');
                    $('.GuInput_' + GuInput + '[data-input="11"]').val(Gucontact_code.substring(0, 4)).trigger('change');
                    $('.GuInput_' + GuInput + '[data-input="12"]').val(Gucontact_code).trigger('change');
                    $('.GuInput_' + GuInput + '[data-input="13"]').val(Guarantor[8]);      //通訊地址_詳細地址
                }

            }


            //當下拉選單發生改變事件(change)，執行
            $('body').on('change', '.select2_city', function () {
                var selectedIndex = $(this).attr('data-index');

                $('.select2_road[data-index="' + selectedIndex + '"]').empty();
                $('.select2_road[data-index="' + selectedIndex + '"]').select2({
                    placeholder: '街道',
                });
                var regioncode = $('.select2_city[data-index="' + selectedIndex + '"]').val();
                $.ajax({
                    type: "POST",
                    data: { regioncode: regioncode },
                    url: '@Url.Content("~/Form/DDLRegion/")',
                    dataType: 'json'
                }).done(function (dataresult) {
                    var jsonAddressArray = JSON.parse(dataresult);
                        for (var i = 0; i < jsonAddressArray.length; i++) {
                            jsonAddressArray[i].id = jsonAddressArray[i].id.replace(/\"/g, '');
                            jsonAddressArray[i].text = jsonAddressArray[i].text.replace(/\"/g, '');
                        }
                    var data_district = jsonAddressArray;
                    $('.select2_district[data-index="' + selectedIndex + '"]').empty();
                    var init_data = [
                        {
                            id: '',
                            text: '鄉/鎮/市/區'
                        },
                    ];
                    $('.select2_district[data-index="' + selectedIndex + '"]').select2({
                        data: init_data,
                    });
                    $('.select2_district[data-index="' + selectedIndex + '"]').select2({
                        data: data_district,
                        placeholder: {
                            id: '',
                            text: '鄉/鎮/市/區'
                        }
                    });
                });
            });
            $('body').on('change', '.select2_district', function () {
                var selectedIndex = $(this).attr('data-index');

                var regioncode = $('.select2_district[data-index="' + selectedIndex + '"]').val();
                $.ajax({
                    type: "POST",
                    data: { regioncode: regioncode },
                    url: '@Url.Content("~/Form/DDLRegion/")',
                    dataType: 'json'
                }).done(function (dataresult) {
                    var jsonAddressArray = JSON.parse(dataresult);
                        for (var i = 0; i < jsonAddressArray.length; i++) {
                            jsonAddressArray[i].id = jsonAddressArray[i].id.replace(/\"/g, '');
                            jsonAddressArray[i].text = jsonAddressArray[i].text.replace(/\"/g, '');
                        }
                    var data_road = jsonAddressArray;
                    $('.select2_road[data-index="' + selectedIndex + '"]').empty();
                    var init_data = [
                        {
                            id: '',
                            text: '街道'
                        },
                    ];
                    $('.select2_road[data-index="' + selectedIndex + '"]').select2({
                        data: init_data,
                    });
                    $('.select2_road[data-index="' + selectedIndex + '"]').select2({
                        data: data_road,
                        placeholder: {
                            id: '',
                            text: '街道'
                        }
                    });
                });
            });
        });

        //------------------
        // 新增減少直系親屬  *
        //------------------
        function changeship(button, active) {
            var intselectorder = parseInt($(button).attr('data-order'));
            if (active == 'create') {
                if (intselectorder < 10) {
                    intselectorder = intselectorder + 1;
                    //顯示輸入欄位
                    $('.directformgroup[data-order="' + intselectorder + '"]').show();
                    //設定欄位為必填
                    $('.directInput_' + intselectorder).prop('required', true);

                    //將人數寫入input欄位
                    $("#directCount").val(intselectorder)
                }
            }
            else {
                //隱藏輸入欄位
                $('.directformgroup[data-order="' + intselectorder + '"]').hide();

                //設定欄位為非必填
                $('.directInput_' + intselectorder).prop('required', false);
                $('.directInput_' + intselectorder).val('');
                if (intselectorder > 0) {
                    intselectorder = intselectorder - 1;
                }
            }
            //將目前人數寫回button中
            $(".shipbutton").attr('data-order', intselectorder);
            //將人數寫入input欄位
            $("#directCount").val(intselectorder)
        }

        //datepicker
        var controls = {
            leftArrow: '<i class="fal fa-angle-left" style="font-size: 1.25rem"></i>',
            rightArrow: '<i class="fal fa-angle-right" style="font-size: 1.25rem"></i>'
        }
        $('.birthday').datepicker(
            {
                format: 'yyyy-mm-dd',
                orientation: "請選擇出生年月日",
                todayHighlight: true,
                templates: controls
            });


</script>
}