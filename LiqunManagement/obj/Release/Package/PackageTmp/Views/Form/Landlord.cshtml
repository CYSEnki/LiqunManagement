@model LiqunManagement.ViewModels.FormViewModels
﻿
@{
    ViewBag.Title = "表單四期";
    ViewBag.Controller = "Form";
    Layout = "~/Views/Shared/smartadmin_Layout.cshtml";

    //表單編號
    var FormID = Model.FormID != null ? Model.FormID : "";
    //房東姓名
    var Name = Model.landlordviewmodel != null ? Model.landlordviewmodel.Name : "";
    //(法人)負責人
    var Principal = Model.landlordviewmodel != null ? (Model.landlordviewmodel.Gender == 2 ? Model.landlordviewmodel.Principal : "") : "";
    //性別
    var Gender = Model.landlordviewmodel != null ? Model.landlordviewmodel.Gender.ToString() : "";
    //生日
    var BirthdayStr = Model.landlordviewmodel != null ? Model.landlordviewmodel.BirthdayStr != null ? Model.landlordviewmodel.BirthdayStr : ""  : "";
    //身分證字號(法人-統一編號)
    var IDNumber = Model.landlordviewmodel != null ? Model.landlordviewmodel.IDNumber : "";
    //電話號碼
    var Phone = Model.landlordviewmodel != null ? Model.landlordviewmodel.Phone : "";
    //銀行代碼
    var BankNo = Model.landlordviewmodel != null ? Model.landlordviewmodel.BankNo : "";
    //分行代碼
    var BrancheNo = Model.landlordviewmodel != null ? Model.landlordviewmodel.BrancheNo : "";
    //銀行帳號
    var BankAccount = Model.landlordviewmodel != null ? Model.landlordviewmodel.BankAccount : "";
    //地址代碼
    var AddressCode = Model.landlordviewmodel != null ? Model.landlordviewmodel.AddressCode_LandLord : "";
    var AddressDetail = Model.landlordviewmodel != null ? Model.landlordviewmodel.AddressDetail : "";
    //通訊地址代碼
    var ContactCode = Model.landlordviewmodel != null ? Model.landlordviewmodel.ContactCode_Landlord : "";
    var ContactAddressDetail = Model.landlordviewmodel != null ? Model.landlordviewmodel.ContactAddressDetail : "";
    //共有人
    var CoOwnerCount = Model.landlordviewmodel != null ? Model.landlordviewmodel.CoOwnerCount : 0;
    var CoOwner1 = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoOwner1.ToString() : "");
    var CoOwner2 = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoOwner2.ToString() : "");
    var CoOwner3 = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoOwner3.ToString() : "");
    var CoOwner4 = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoOwner4.ToString() : "");
    var CoOwner5 = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoOwner5.ToString() : "");
    //代理人
    var AgentCount = Model.landlordviewmodel != null ? Model.landlordviewmodel.AgentCount : 0;
    var Agent = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.Agent.ToString() : "");

    //備註
    var memo = Model.landlordviewmodel != null ? Model.landlordviewmodel.Memo : "";

    //下拉選單
    var LaAddress_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.LaAddress_District : "");
    var LaAddress_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.LaAddress_Road : "");
    var LaContact_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.LaContact_District : "");
    var LaContact_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.LaContact_Road : "");
    //共有人一
    var CoAddress1_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoAddress1_District : "");
    var CoAddress1_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoAddress1_Road : "");
    var CoContact1_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoContact1_District : "");
    var CoContact1_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoContact1_Road : "");
    //共有人二
    var CoAddress2_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoAddress2_District : "");
    var CoAddress2_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoAddress2_Road : "");
    var CoContact2_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoContact2_District : "");
    var CoContact2_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoContact2_Road : "");
    //共有人三
    var CoAddress3_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoAddress3_District : "");
    var CoAddress3_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoAddress3_Road : "");
    var CoContact3_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoContact3_District : "");
    var CoContact3_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoContact3_Road : "");
    //共有人四
    var CoAddress4_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoAddress4_District : "");
    var CoAddress4_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoAddress4_Road : "");
    var CoContact4_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoContact4_District : "");
    var CoContact4_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoContact4_Road : "");
    //共有人五
    var CoAddress5_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoAddress5_District : "");
    var CoAddress5_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoAddress5_Road : "");
    var CoContact5_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoContact5_District : "");
    var CoContact5_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.CoContact5_Road : "");

    //代理人
    var AgAddress_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.AgAddress_District : "");
    var AgAddress_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.AgAddress_Road : "");
    var AgContact_District = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.AgContact_District : "");
    var AgContact_Road = @Html.Raw(Model.landlordviewmodel != null ? Model.landlordviewmodel.AgContact_Road : "");


}
<style>
    .padding-top-ten {
        padding-top: 10px !important;
    }

    .panel .panel-toolbar {
        display: none;
    }

    .panel.panel-locked:not(.panel-fullscreen) .panel-hdr h2:before {
        display: none;
    }

    .form-label {
        font-weight: 600 !important;
    }
</style>
@*select2*@
@*<link href="~/Content/select2/css/select2.min.css" rel="stylesheet" />*@
<link href="~/Content/smartadmin-package-4.5.1/smartadmin-html-full/dist/css/formplugins/select2/select2.bundle.css" rel="stylesheet" />
@*datepicker*@
<link href="~/Content/smartadmin-package-4.5.1/smartadmin-html-full/dist/css/formplugins/bootstrap-datepicker/bootstrap-datepicker.css" rel="stylesheet" />
@*sweetalert2*@
<link href="~/Content/sweetalert2/sweetalert2.min.css" rel="stylesheet" />

@*datetimepicker*@
@*<link href="~/Content/bootstrap-datetimepicker.css" rel="stylesheet" />*@

<main id="js-page-content" role="main" class="page-content">
    <ol class="breadcrumb page-breadcrumb">
        <li class="breadcrumb-item">
            <a href="javascript:void(0);">後臺管理系統</a>
        </li>
        <li class="breadcrumb-item">填寫表單</li>
        <li class="breadcrumb-item">四期</li>
        <li class="breadcrumb-item active">房東資料</li>
        <li class="position-absolute pos-top pos-right d-none d-sm-block">
            <span class="js-get-date"></span>
        </li>
    </ol>
    <div class="subheader">
        <h1 class="subheader-title">
            <i class="subheader-icon fal fa-edit"></i>
            <span class="font-weight-bold" style="padding-top:5px;">房東資料</span>
            <small>

            </small>
        </h1>
    </div>
    <div class="row">
        <div class="col-xl-12">
            <div id="panel-1" class="panel panel-locked">
                <div class="panel-hdr">
                    <h2>
                        房東資料
                    </h2>
                </div>
                <div class="panel-container show">
                    <div class="panel-content">
                        @using (Html.BeginForm("Landlord", "Form", FormMethod.Post, new { @class = "needs-validation", @enctype = "multipart/form-data", @novalidate = "" }))
                        {
                            @*表單編號*@
                            <input type="text" value="@ViewBag.FormID" name="FormID" hidden />

                            @*自然人或法人*@
                            <div class="form-group">
                                <div class="frame-wrap">
                                    <div class="custom-control custom-radio custom-control-inline">
                                        <input type="radio" class="custom-control-input" id="natureperson" name="persontypeRadio" value="0" checked>
                                        <label class="custom-control-label" for="natureperson">自然人</label>
                                    </div>
                                    <div class="custom-control custom-radio custom-control-inline">
                                        <input type="radio" class="custom-control-input" id="legalperson" name="persontypeRadio" value="1">
                                        <label class="custom-control-label" for="legalperson">法人</label>
                                    </div>
                                </div>
                            </div>
                            @*房東*@
                            <div class="panel-tag">
                                房東
                            </div>
                            @*房東姓名*@
                            <div class="form-group">
                                <label class="form-label" for="Name_Landlord" id="labelName">房東姓名</label>
                                <input type="text" id="Name_0" name="Name_0" class="form-control" required>
                                <div class="invalid-feedback">
                                    請輸入房東姓名
                                </div>
                            </div>
                            @*負責人姓名*@
                            <div class="form-group Principle_formgroup " style="display: none;">
                                <label class="form-label" for="Principal">負責人姓名</label>
                                <input type="text" id="Principal" name="Principal" class="form-control">
                                <div class="invalid-feedback">
                                    請輸入負責人姓名
                                </div>
                            </div>
                            @*性別*@
                            <div class="form-group legal_formtype">
                                <label class="form-label">
                                    性別:
                                    <span class="text-danger">*</span>
                                </label>
                                <div class="frame-wrap padding-top-ten">
                                    <div class="custom-control custom-radio custom-control-inline custom-radio-rounded">
                                        <input type="radio" class="custom-control-input" id="genderRadio_0_1" name="genderRadio_0" value="1" required="">
                                        <label class="custom-control-label" for="genderRadio_0_1">男</label>
                                    </div>
                                    <div class="custom-control custom-radio custom-control-inline custom-radio-rounded">
                                        <input type="radio" class="custom-control-input" id="genderRadio_0_0" name="genderRadio_0" value="0" required="">
                                        <label class="custom-control-label" for="genderRadio_0_0">女</label>
                                        <div class="invalid-feedback">
                                            請選擇房東性別
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @*出生年月日*@
                            <div class="form-group legal_formtype">
                                <label class="form-label" for="birthday">生日</label>
                                <div class="col-md-8 col-lg-6 mb-3 pl-0">
                                    <div class="input-group w-100">
                                        <div class="input-group-append">
                                            <span class="input-group-text">民國</span>
                                        </div>
                                        <input type="number" class="form-control" min="1" max="@(Convert.ToInt32(DateTime.Now.Year)-1911)" id="birthdayYear_0" name="birthdayYear_0" required>
                                        <div class="input-group-append">
                                            <span class="input-group-text">年</span>
                                        </div>
                                        <input type="number" class="form-control birthdayMonth" min="1" max="12" id="birthdayMonth_0" name="birthdayMonth_0" data-index="0" required>
                                        <div class="input-group-append">
                                            <span class="input-group-text">月</span>
                                        </div>
                                        <input type="number" class="form-control birthdayDay" min="1" max="31" id="birthdayDay_0" name="birthdayDay_0" data-index="0" required>
                                        <div class="input-group-append">
                                            <span class="input-group-text">日</span>
                                        </div>
                                    </div>
                                </div>
                                <input type="text" id="birthday_0" name="birthday_0" hidden>
                            </div>
                            @*身分證字號*@
                            <div class="form-group">
                                <label class="form-label" for="IDnumber_0" id="labelIDNumber">身分證字號</label>
                                <div class="row pb-2 legal_formtype">
                                    <div class="col-12">
                                        <div class="custom-control custom-checkbox custom-control-inline">
                                            <input type="checkbox" class="custom-control-input national_check" id="international_IDnumber" name="international_IDnumber" data-index="0">
                                            <label class="custom-control-label" for="international_IDnumber">外籍</label>
                                        </div>
                                    </div>
                                </div>
                                <input type="text" id="IDnumber_0" name="IDnumber_0" class="form-control inputIDnumber" data-index="0"  pattern="^[A-Z]\d{9}$" required>
                                <div class="invalid-feedback">
                                    請輸入身分證字號，並確認格式為【1個英文字母+9個數字】 (ex.A123456789)
                                </div>
                            </div>
                            @*連絡電話*@
                            <div class="form-group">
                                <label class="form-label" for="phonenumber">連絡電話</label>
                                <input type="text" id="Phone_0" name="Phone_0" class="form-control inputPhoneNumber" data-index="0"  pattern="^\d{10}$" required>
                                <div class="invalid-feedback">
                                    請輸入連絡電話，並確認格式為【10個數字】
                                </div>
                            </div>
                            @*戶籍地址*@
                            <div class="form-group">
                                <label class="form-label">戶籍地址</label>
                                <span class="text-danger">*</span>
                                <div class="row">
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_city" id="selectcity" data-index="1" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇縣/市
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_district" data-index="1" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇鄉/鎮/市/區
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_road" data-index="1" name="addressroad_0" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇街/路
                                        </div>
                                    </div>
                                </div>
                                <div class="row pt-2">
                                    <div class="col-12">
                                        <input type="text" name="AddressDetail_0" class="form-control" placeholder="ex.108號1樓" required>
                                    </div>
                                </div>
                            </div>
                            @*通訊地址*@
                            <div class="form-group">
                                <div class="row pb-2">
                                    <div class="col-12">
                                        <div class="custom-control custom-checkbox custom-control-inline">
                                            <input type="checkbox" class="custom-control-input sameaddress" id="sameaddress_check_0" name="sameaddress_check_0" data-index="2" value="true">
                                            <label class="custom-control-label" for="sameaddress_check_0">同戶籍地址</label>
                                        </div>
                                    </div>
                                </div>
                                <label class="form-label">通訊地址</label>
                                <span class="text-danger">*</span>
                                <div class="row">
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_city select_contact_2" data-index="2" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇縣/市
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_district select_contact_2" data-index="2" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇鄉/鎮/市/區
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_road select_contact_2" name="contactroad_0" data-index="2" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇街/路
                                        </div>
                                    </div>
                                </div>
                                <div class="row pt-2">
                                    <div class="col-12">
                                        <input type="text" class="form-control select_contact_2" name="detailcontact_0" data-index="2" placeholder="ex.108號1樓" required>
                                    </div>
                                </div>
                            </div>

                            @*銀行*@
                            <div class="form-group">
                                <label class="form-label">銀行/銀行代碼</label>
                                <span class="text-danger">*</span>
                                <div class="row">
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_bank" id="bank_0" name="bank_0" data-index="1" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇銀行/銀行代碼
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_bankbranches" id="bankbranche_0" name="bankbranche_0" data-index="1" required>
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇分行/分行代碼
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div class="form-group">
                                <label class="form-label" for="bankaccount_0">帳號</label><label class="form-label" id="jqlengthalert" for="bankaccount_0"></label>
                                <div class="row">
                                    <div class="col-md-4">
                                        <div class="input-group">
                                            <div class="input-group-prepend">
                                                <span class="input-group-text">帳號</span><label class="form-label" id="jqlengthalert" for="banknumber"></label>
                                            </div>
                                            <input type="text" id="bankaccount_0" name="bankaccount_0" class="form-control" required>
                                            <div class="invalid-feedback" id="banknumberalert">
                                                請填寫帳號
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @*共有人*@
                            @Html.Partial("_LandlordCoOwner", "Form")

                            @*代理人*@
                            <div class="panel-tag">
                                代理人
                            </div>
                            <div class="form-group">
                                <div class="custom-control custom-checkbox custom-control-inline">
                                    <input type="checkbox" class="custom-control-input" id="agentCheckbox" name="agentCheckbox" value="true">
                                    <label class="custom-control-label" for="agentCheckbox">代理人</label>
                                </div>
                            </div>
                            @*代理人姓名*@
                            <div class="form-group getagent">
                                <label class="form-label" for="Name_11">代理人姓名</label>
                                <input type="text" class="form-control agentrequired" id="Name_11" name="Name_11">
                                <div class="invalid-feedback">
                                    請輸入代理人姓名
                                </div>
                            </div>
                            @*性別*@
                            <div class="form-group getagent">
                                <label class="form-label">
                                    性別:
                                    <span class="text-danger">*</span>
                                </label>
                                <div class="frame-wrap padding-top-ten">
                                    <div class="custom-control custom-radio custom-control-inline custom-radio-rounded">
                                        <input type="radio" class="custom-control-input agentrequired" id="genderRadio_11_1" name="genderRadio_11" value="1">
                                        <label class="custom-control-label" for="genderRadio_11_1">男</label>
                                    </div>
                                    <div class="custom-control custom-radio custom-control-inline custom-radio-rounded">
                                        <input type="radio" class="custom-control-input agentrequired" id="genderRadio_11_0" name="genderRadio_11" value="0">
                                        <label class="custom-control-label" for="genderRadio_11_0">女</label>
                                        <div class="invalid-feedback">
                                            請選擇代理人性別
                                        </div>
                                    </div>
                                </div>
                            </div>
                            @*出生年月日*@
                            <div class="form-group getagent">
                                <label class="form-label" for="birthday">生日</label>
                                <div class="col-md-8 col-lg-6 getagent mb-3 pl-0">
                                    <div class="input-group w-100">
                                        <div class="input-group-append">
                                            <span class="input-group-text">民國</span>
                                        </div>
                                        <input type="number" class="form-control agentrequired" max="@(Convert.ToInt32(DateTime.Now.Year)-1911)" min="1" id="birthdayYear_11" name="birthdayYear_11">
                                        <div class="input-group-append">
                                            <span class="input-group-text">年</span>
                                        </div>
                                        <input type="number" class="form-control birthdayMonth agentrequired" max="12" min="1" id="birthdayMonth_11" name="birthdayMonth_11" data-index="11">
                                        <div class="input-group-append">
                                            <span class="input-group-text">月</span>
                                        </div>
                                        <input type="number" class="form-control agentrequired" max="31" min="1" id="birthdayDay_11" name="birthdayDay_11">
                                        <div class="input-group-append">
                                            <span class="input-group-text">日</span>
                                        </div>
                                    </div>
                                </div>
                                @*<input type="text" id="birthday_11" name="birthday_11" hidden>*@
                            </div>
                            @*身分證字號*@
                            <div class="form-group getagent">
                                <label class="form-label" for="IDNumber_10">身分證字號</label>
                                <div class="row pb-2">
                                    <div class="col-12">
                                        <div class="custom-control custom-checkbox custom-control-inline">
                                            <input type="checkbox" class="custom-control-input national_check" id="international_IDnumber_11" data-index="11">
                                            <label class="custom-control-label" for="international_IDnumber_11">外籍</label>
                                        </div>
                                    </div>
                                </div>
                                <input type="text" class="form-control inputIDnumber agentrequired" id="IDNumber_11" name="IDNumber_11" data-index="11"  pattern="^[A-Z]\d{9}$">
                                <div class="invalid-feedback">
                                    請輸入身分證字號，並確認格式為【1個英文字母+9個數字】 (ex.A123456789)
                                </div>
                            </div>
                            @*連絡電話*@
                            <div class="form-group getagent">
                                <label class="form-label" for="phonenumber">連絡電話</label>
                                <input type="text" id="Phone_11" name="Phone_11" class="form-control inputPhoneNumber agentrequired" data-index="11"  pattern="^\d{10}$">
                                <div class="invalid-feedback">
                                    請輸入連絡電話，並確認格式為【10個數字】
                                </div>
                            </div>
                            @*戶籍地址*@
                            <div class="form-group getagent">
                                <label class="form-label">戶籍地址</label>
                                <span class="text-danger">*</span>
                                <div class="row">
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_city agentrequired" data-index="3">
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇縣/市
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_district agentrequired" data-index="3">
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇鄉/鎮/市/區
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_road agentrequired" data-index="3" id="addressroad_11" name="addressroad_11">
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇街/路
                                        </div>
                                    </div>
                                </div>
                                <div class="row pt-2">
                                    <div class="col-12">
                                        <input type="text" class="form-control agentrequired" id="AddressDetail_11" name="AddressDetail_11" placeholder="ex.108號1樓">
                                    </div>
                                </div>
                            </div>
                            @*通訊地址*@
                            <div class="form-group getagent">
                                <div class="row pb-2">
                                    <div class="col-12">
                                        <div class="custom-control custom-checkbox custom-control-inline">
                                            <input type="checkbox" class="custom-control-input sameaddress" id="sameaddress_check_11" name="sameaddress_check_11" data-index="4" value="true">
                                            <label class="custom-control-label" for="sameaddress_check_11">同戶籍地址</label>
                                        </div>
                                    </div>
                                </div>
                                <label class="form-label">通訊地址</label>
                                <span class="text-danger">*</span>
                                <div class="row">
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_city select_contact_4 agentrequired" data-index="4">
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇縣/市
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_district select_contact_4 agentrequired" data-index="4">
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇鄉/鎮/市/區
                                        </div>
                                    </div>
                                    <div class="col-lg-4 pt-3">
                                        <select class="custom-select form-control select2_road select_contact_4 agentrequired" data-index="4" id="contactroad_11" name="contactroad_11">
                                            <option value="" selected=""></option>
                                        </select>
                                        <div class="invalid-feedback">
                                            請選擇街/路
                                        </div>
                                    </div>
                                </div>
                                <div class="row pt-2">
                                    <div class="col-12">
                                        <input type="text" class="form-control select_contact_4 agentrequired" id="detailcontact_11" name="detailcontact_11" placeholder="ex.108號1樓">
                                    </div>
                                </div>
                            </div>

                            <input type="text" id="AgentInput" name="AgentInput" hidden />
                            <!--備註欄-->
                            <div class="form-group">
                                <label class="form-label" for="example-textarea">備註</label>
                                <textarea class="form-control" id="momo" name="memo" rows="5" style="height: 122px;"></textarea>
                            </div>
                            <div class="panel-content border-faded border-left-0 border-right-0 border-bottom-0 d-flex flex-row align-items-center">
                                <div class="custom-control custom-checkbox">
                                    <input type="checkbox" class="custom-control-input" id="invalidCheck" required="">
                                    <label class="custom-control-label" for="invalidCheck">確認填寫完成 <span class="text-danger">*</span></label>
                                    <div class="invalid-feedback">
                                        您必須選擇此區塊以確認完成填寫
                                    </div>
                                </div>
                                <button class="btn btn-primary ml-auto waves-effect waves-themed" type="submit">送出</button>
                            </div>
                        }
                    </div>
                </div>
            </div>
        </div>
    </div>
</main>

@section scripts
{
    @*select2*@
    @*<script src="~/Content/select2/js/select2.min.js"></script>*@
    <script src="~/Content/smartadmin-package-4.5.1/smartadmin-html-full/dist/js/formplugins/select2/select2.bundle.js"></script>
    @*sweetalert2*@
    <script src="~/Content/sweetalert2/sweetalert2.min.js"></script>
    @*datepicker*@
    <script src="~/Content/smartadmin-package-4.5.1/smartadmin-html-full/dist/js/formplugins/bootstrap-datepicker/bootstrap-datepicker.js"></script>
    @*inputmask*@
    @*<script src="~/Content/smartadmin-package-4.5.1/smartadmin-html-full/dist/js/formplugins/inputmask/inputmask.bundle.js"></script>*@
    @*datetimepicker*@
    <script src="~/Content/plugins/moment/moment.min.js"></script>
    <script src="~/Content/plugins/moment/moment-with-locales.js"></script>
    @*<script src="~/Scripts/datepicker-zh-TW.js"></script>*@
    @*<script src="~/Content/plugins/fullcalendar/locales-all.min.js"></script>*@

<script type="text/javascript">
        //validation
        (function () {
            'use strict';
            window.addEventListener('load', function () {
                // Fetch all the forms we want to apply custom Bootstrap validation styles to
                var forms = document.getElementsByClassName('needs-validation');
                // Loop over them and prevent submission
                var validation = Array.prototype.filter.call(forms, function (form) {
                    form.addEventListener('submit', function (event) {
                        if (form.checkValidity() === false) {
                            event.preventDefault();
                            event.stopPropagation();
                        }
                        else {
                            //打包房東生日
                            var persontypeRadioElement = document.getElementsByName("persontypeRadio");
                            var typevalue;
                            for (var i = 0; i < persontypeRadioElement.length; i++) {
                                if (persontypeRadioElement[i].checked) {
                                    typevalue = persontypeRadioElement[i].value;
                                    break; // 如果找到选中的值，就跳出循环
                                }
                            }
                            if (typevalue === '0') {
                                const Year = parseInt($("#birthdayYear_0").val()) + 1911;
                                var Month = $("#birthdayMonth_0").val();
                                var Day = $("#birthdayDay_0").val();
                                const birth = Year.toString() + '-' + Month + '-' + Day;
                                $("#birthday_0").val(birth)
                            } else {
                                $("#birthday_0").val('')
                            }

                            //將共有人資料打包
                            //取得幾位共有人
                            var CoRadioElement = document.getElementsByName("CoOwnerRadio");
                            // 存儲選中的值
                            var selectedValue;
                            // 循环遍历单选按钮，找到选中的值
                            for (var i = 0; i < CoRadioElement.length; i++) {
                                if (CoRadioElement[i].checked) {
                                    selectedValue = CoRadioElement[i].value;
                                    break; // 如果找到选中的值，就跳出循环
                                }
                            }
                            //共有人1
                            if (selectedValue >= 1) {
                                const dataArray = [];
                                const Name = document.getElementById(`Name_Co1`).value;
                                const Year = parseInt(document.getElementById(`birthdayYear_Co1`).value) + 1911;
                                const Month = document.getElementById(`birthdayMonth_Co1`).value;
                                const Day = document.getElementById(`birthdayDay_Co1`).value;
                                const Birthday = Year.toString() + '-' + Month + '-' + Day;
                                const IDNumber = document.getElementById(`IDnumber_Co1`).value;
                                const Phone = document.getElementById(`Phone_Co1`).value;
                                const Road = document.getElementById(`road_Co1`).value;
                                const AddressDetail = document.getElementById(`AddressDetail_Co1`).value;
                                const sameaddresscheck = document.getElementById('sameaddress_Co1');
                                var Contact = Road;
                                var detailContact = AddressDetail;
                                if (sameaddresscheck) {
                                    if (!sameaddresscheck.checked) {
                                        Contact = document.getElementById(`road_contact_Co1`).value;
                                        detailContact = document.getElementById(`detailcontact_Co1`).value;
                                    }
                                }
                                dataArray.push(Name);
                                dataArray.push(Birthday);
                                dataArray.push(IDNumber);
                                dataArray.push(Phone);
                                dataArray.push(Road);
                                dataArray.push(AddressDetail);
                                dataArray.push(Contact);
                                dataArray.push(detailContact);
                                const jsonResult = JSON.stringify(dataArray);
                                $('#CoOwnerInput1').val(jsonResult);
                            }
                            if (selectedValue >= 2) {
                                const dataArray = [];
                                const Name = document.getElementById(`Name_Co2`).value;
                                const Year = parseInt(document.getElementById(`birthdayYear_Co2`).value) + 1911;
                                const Month = document.getElementById(`birthdayMonth_Co2`).value;
                                const Day = document.getElementById(`birthdayDay_Co2`).value;
                                const Birthday = Year.toString() + '-' + Month + '-' + Day;
                                const IDNumber = document.getElementById(`IDnumber_Co2`).value;
                                const Phone = document.getElementById(`Phone_Co2`).value;
                                const Road = document.getElementById(`road_Co2`).value;
                                const AddressDetail = document.getElementById(`AddressDetail_Co2`).value;
                                const sameaddresscheck = document.getElementById('sameaddress_Co2');
                                var Contact = Road;
                                var detailContact = AddressDetail;
                                if (sameaddresscheck) {
                                    if (!sameaddresscheck.checked) {
                                        Contact = document.getElementById(`road_contact_Co2`).value;
                                        detailContact = document.getElementById(`detailcontact_Co2`).value;
                                    }
                                }
                                dataArray.push(Name);
                                dataArray.push(Birthday);
                                dataArray.push(IDNumber);
                                dataArray.push(Phone);
                                dataArray.push(Road);
                                dataArray.push(AddressDetail);
                                dataArray.push(Contact);
                                dataArray.push(detailContact);
                                const jsonResult = JSON.stringify(dataArray);
                                $('#CoOwnerInput2').val(jsonResult);
                            }
                            if (selectedValue >= 3) {
                                const dataArray = [];
                                const Name = document.getElementById(`Name_Co3`).value;
                                const Year = parseInt(document.getElementById(`birthdayYear_Co3`).value) + 1911;
                                const Month = document.getElementById(`birthdayMonth_Co3`).value;
                                const Day = document.getElementById(`birthdayDay_Co3`).value;
                                const Birthday = Year.toString() + '-' + Month + '-' + Day;
                                const IDNumber = document.getElementById(`IDnumber_Co3`).value;
                                const Phone = document.getElementById(`Phone_Co3`).value;
                                const Road = document.getElementById(`road_Co3`).value;
                                const AddressDetail = document.getElementById(`AddressDetail_Co3`).value;
                                const sameaddresscheck = document.getElementById('sameaddress_Co3');
                                var Contact = Road;
                                var detailContact = AddressDetail;
                                if (sameaddresscheck) {
                                    if (!sameaddresscheck.checked) {
                                        Contact = document.getElementById(`road_contact_Co3`).value;
                                        detailContact = document.getElementById(`detailcontact_Co3`).value;
                                    }
                                }
                                dataArray.push(Name);
                                dataArray.push(Birthday);
                                dataArray.push(IDNumber);
                                dataArray.push(Phone);
                                dataArray.push(Road);
                                dataArray.push(AddressDetail);
                                dataArray.push(Contact);
                                dataArray.push(detailContact);
                                const jsonResult = JSON.stringify(dataArray);
                                $('#CoOwnerInput3').val(jsonResult);
                            }
                            if (selectedValue >= 4) {
                                const dataArray = [];
                                const Name = document.getElementById(`Name_Co4`).value;
                                const Year = parseInt(document.getElementById(`birthdayYear_Co4`).value) + 1911;
                                const Month = document.getElementById(`birthdayMonth_Co4`).value;
                                const Day = document.getElementById(`birthdayDay_Co4`).value;
                                const Birthday = Year.toString() + '-' + Month + '-' + Day;
                                const IDNumber = document.getElementById(`IDnumber_Co4`).value;
                                const Phone = document.getElementById(`Phone_Co4`).value;
                                const Road = document.getElementById(`road_Co4`).value;
                                const AddressDetail = document.getElementById(`AddressDetail_Co4`).value;
                                const sameaddresscheck = document.getElementById('sameaddress_Co4');
                                var Contact = Road;
                                var detailContact = AddressDetail;
                                if (sameaddresscheck) {
                                    if (!sameaddresscheck.checked) {
                                        Contact = document.getElementById(`road_contact_Co4`).value;
                                        detailContact = document.getElementById(`detailcontact_Co4`).value;
                                    }
                                }

                                dataArray.push(Name);
                                dataArray.push(Birthday);
                                dataArray.push(IDNumber);
                                dataArray.push(Phone);
                                dataArray.push(Road);
                                dataArray.push(AddressDetail);
                                dataArray.push(Contact);
                                dataArray.push(detailContact);
                                const jsonResult = JSON.stringify(dataArray);
                                $('#CoOwnerInput4').val(jsonResult);
                            }
                            if (selectedValue >= 5) {
                                const dataArray = [];
                                const Name = document.getElementById(`Name_Co5`).value;
                                const Year = parseInt(document.getElementById(`birthdayYear_Co5`).value) + 1911;
                                const Month = document.getElementById(`birthdayMonth_Co5`).value;
                                const Day = document.getElementById(`birthdayDay_Co5`).value;
                                const Birthday = Year.toString() + '-' + Month + '-' + Day;
                                const IDNumber = document.getElementById(`IDnumber_Co5`).value;
                                const Phone = document.getElementById(`Phone_Co5`).value;
                                const Road = document.getElementById(`road_Co5`).value;
                                const AddressDetail = document.getElementById(`AddressDetail_Co5`).value;
                                const sameaddresscheck = document.getElementById('sameaddress_Co5');
                                var Contact = Road;
                                var detailContact = AddressDetail;
                                if (sameaddresscheck) {
                                    if (!sameaddresscheck.checked) {
                                        Contact = document.getElementById(`road_contact_Co5`).value;
                                        detailContact = document.getElementById(`detailcontact_Co5`).value;
                                    }
                                }

                                dataArray.push(Name);
                                dataArray.push(Birthday);
                                dataArray.push(IDNumber);
                                dataArray.push(Phone);
                                dataArray.push(Road);
                                dataArray.push(AddressDetail);
                                dataArray.push(Contact);
                                dataArray.push(detailContact);
                                const jsonResult = JSON.stringify(dataArray);
                                $('#CoOwnerInput5').val(jsonResult);
                            }


                            //將代理人資料打包
                            //取得幾位共有人
                            const agentCheckbox = document.getElementById('agentCheckbox');
                            const agentdataArray = [];
                            if (agentCheckbox) {
                                if (agentCheckbox.checked) {
                                    const Name = document.getElementById(`Name_11`).value;
                                    //性別
                                    var genderRadioElement = document.getElementsByName("genderRadio_11");
                                    // 定义变量来存储选中的值
                                    var selectgender = '1'; //預設男性
                                    if (!genderRadioElement[0].checked) {
                                        selectgender = '0'  //女性
                                    }
                                    const Year = parseInt(document.getElementById(`birthdayYear_11`).value) + 1911;
                                    const Month = document.getElementById(`birthdayMonth_11`).value;
                                    const Day = document.getElementById(`birthdayDay_11`).value;
                                    const Birthday = Year.toString() + '-' + Month + '-' + Day;
                                    const IDNumber = document.getElementById(`IDNumber_11`).value;
                                    const Phone = document.getElementById(`Phone_11`).value;
                                    const Road = document.getElementById(`addressroad_11`).value;
                                    const AddressDetail = document.getElementById(`AddressDetail_11`).value;
                                    const sameaddresscheck = document.getElementById('sameaddress_check_11');
                                    var Contact = Road;
                                    var detailContact = AddressDetail;
                                    if (sameaddresscheck) {
                                        if (!sameaddresscheck.checked) {
                                            Contact = document.getElementById(`contactroad_11`).value;
                                            detailContact = document.getElementById(`detailcontact_11`).value;
                                        }
                                    }
                                    agentdataArray.push(Name);
                                    agentdataArray.push(selectgender);
                                    agentdataArray.push(Birthday);
                                    agentdataArray.push(IDNumber);
                                    agentdataArray.push(Phone);
                                    agentdataArray.push(Road);
                                    agentdataArray.push(AddressDetail);
                                    agentdataArray.push(Contact);
                                    agentdataArray.push(detailContact);
                                    const jsonResult = JSON.stringify(agentdataArray);
                                    $('#AgentInput').val(jsonResult);
                                }
                            }
                        }
                        form.classList.add('was-validated');


                    }, false);
                });
            }, false);
        })();

        $(function () {
            //inputmask
            //$(":input").inputmask();

            //將不需填寫的資料先隱藏(共有人)
            $('.getagent').hide();
            $('.getco1').hide();
            $('.getco2').hide();
            $('.getco3').hide();
            $('.getco4').hide();
            $('.getco5').hide();

            //------------------
            // 初始化物件地址下拉選單  *
            //------------------
            var jsonCity = @Html.Raw(Json.Encode(ViewBag.citylist));
            var jsonArray = JSON.parse(jsonCity);

            for (var i = 0; i < jsonArray.length; i++) {
                jsonArray[i].id = jsonArray[i].id.replace(/\"/g, '');
                jsonArray[i].text = jsonArray[i].text.replace(/\"/g, '');
            }

            var data_city = jsonArray;
            $('.select2_city').select2({
                data: data_city,
                placeholder: '縣/市'
            });
            $('.select2_district').select2({
                //data: data_district,
                placeholder: '鄉/鎮/市/區',
            });
            $('.select2_road').select2({
                //data: data_road,
                placeholder: '街道',
            });

            //------------------
            // 初始化銀行下拉選單  *
            //------------------
            var jsonBank = @Html.Raw(Json.Encode(ViewBag.banklist));
            var jsonBankArray = JSON.parse(jsonBank);

            //for (var i = 0; i < jsonBankArray.length; i++) {
            //    jsonBankArray[i].id = jsonBankArray[i].id.replace(/\"/g, '');
            //    jsonBankArray[i].text = jsonBankArray[i].text.replace(/\"/g, '');
            //}
            var data_bank = jsonBankArray;
            $(".select2_bank").select2({
                data: data_bank,
                placeholder: '銀行'
            })
            $(".select2_bankbranches").select2({
                placeholder: '分行'
            })

            //判斷是否為第一次載入頁面
            var isFirstLoad_Bank = true;
            //銀行下拉選單
            $('body').on('change', '.select2_bank', function () {

                var selectedIndex = $(this).attr('data-index');
                var bankcode = $('.select2_bank[data-index="' + selectedIndex + '"]').val();
                $.ajax({
                    type: "POST",
                    data: { bankcode: bankcode },
                    url: '@Url.Content("~/Form/DDLBank/")',
                    dataType: 'json'
                }).done(function (dataresult) {
                    //第二層銀行支部
                    var ddlArray = JSON.parse(dataresult.bankJson);
                    ddlArray = ddlArray.map(function (item) {
                        item.id = item.id.replace(/\"/g, '');
                        item.text = item.text.replace(/\"/g, '');
                        return item;
                    });
                    $('.select2_bankbranches[data-index="' + selectedIndex + '"]').empty();
                    var init_data = [
                        {
                            id: '',
                            text: '分行'
                        },
                    ];
                    $('.select2_bankbranches[data-index="' + selectedIndex + '"]').select2({
                        data: init_data,
                    });

                    $('.select2_bankbranches[data-index="' + selectedIndex + '"]').select2({
                        data: ddlArray,
                        placeholder: '分行'
                    }).trigger('change');

                    //------------------
                    // 編輯模式
                    //------------------
                    if ('@FormID' !== '') {
                        if (isFirstLoad_Bank) {
                            //分行代碼
                            var BrancheNo = '@BrancheNo';
                            $('#bankbranche_0').val(BrancheNo).trigger('change');
                            isFirstLoad_Bank = false;
                        }
                    }
                    //設定帳號長度
                    var inputbanknumberElement = document.getElementById('bankaccount_0');
                    var alertelement = document.getElementById('banknumberalert');
                    var lengthalert = document.getElementById('jqlengthalert');
                    if (dataresult.lengthset.length === 0) {
                        //非兩種長度以上
                        var length = "";
                        if (dataresult.minlength == dataresult.maxlength) {
                            length = dataresult.minlength + "字";
                        }
                        else {
                            length = dataresult.minlength + "字 ~" + dataresult.maxlength + "字"
                        }

                        alertelement.innerHTML = "請正確輸入帳號，帳號長度數請填寫 : " + length;
                        inputbanknumberElement.setAttribute('pattern', '.{' + dataresult.minlength + ',' + dataresult.maxlength + '}');
                        lengthalert.innerHTML = "(" + length + ")"
                    }
                    else {
                        // 將陣列中的數字轉換成以 | 分隔的字串
                        var regexPattern = dataresult.lengthset.map(length => `.{${length}}`).join('|');
                        var regexword = dataresult.lengthset.join('字,') + "字";

                        alertelement.innerHTML = "請正確輸入帳號，帳號長度數請填寫 : " + regexword;
                        inputbanknumberElement.setAttribute('pattern', regexPattern);
                        lengthalert.innerHTML = "(" + regexword + ")"

                    }
                });
            });

            //------------------
            // 自然人/法人  *
            //------------------
            $('input[name="persontypeRadio"]').change(function () {

                $('input[name="persontypeRadio"]').each(function () {
                    var radioId = $(this).attr('id');
                    // 檢查是否被點選
                    if ($(this).is(':checked')) {
                        // 根據不同的 id 做相應的處理
                        const inputElement = document.getElementById('IDnumber_0');
                        switch (radioId) {
                            case "natureperson":
                                //更改姓名
                                $('#labelName').text('房東姓名');
                                $('#labelIDNumber').text('身分證字號');
                                $('.Principle_formgroup').hide();
                                $('#Principal').prop('required', false);
                                //需要性別
                                $('.legal_formtype').show();
                                $('#genderRadio_0_1').prop('required', true);
                                $('#genderRadio_0_0').prop('required', true);
                                //生日
                                $('#birthdayYear_0').prop('required', true);
                                $('#birthdayMonth_0').prop('required', true);
                                $('#birthdayDay_0').prop('required', true);
                                //身分證字號(需驗證)
                                inputElement.setAttribute('pattern', '^[A-Z]\\d{9}$');
                                break;
                            case "legalperson":
                                //更改姓名
                                $('#labelName').text('公司名稱');
                                $('#labelIDNumber').text('統一編號');
                                $('.Principle_formgroup').show();
                                $('#Principal').prop('required', true);
                                //取消性別
                                $('.legal_formtype').hide();
                                $('#genderRadio_0_1').prop('required', false);
                                $('#genderRadio_0_0').prop('required', false);
                                //生日
                                $('#birthdayYear_0').prop('required', false);
                                $('#birthdayMonth_0').prop('required', false);
                                $('#birthdayDay_0').prop('required', false);
                                //身分證字號(不需驗證)
                                inputElement.removeAttribute('pattern');
                                break;
                        }
                    }
                })
            });

            //------------------
            // 是否上傳稅單  *
            //------------------
            //主要用途 : Inline1Radio3
            $('input[name="Inline1Radio3"]').change(function () {
                // 獲取被點選的 radio 按鈕的值
                var selectedValue = $(this).val();
                $('input[name="Inline1Radio3"]').each(function () {
                    var radioId = $(this).attr('id');
                    // 檢查是否被點選
                    if ($(this).is(':checked')) {
                        // 根據不同的 id 做相應的處理
                        if (radioId === 'Inline1Radio3_1') {
                            //住宅用; 不用上傳稅單
                            var fileInput = document.getElementById('taxFile');
                            var filelable = document.getElementById('taxFileLable');
                            fileInput.value = '';
                            filelable.innerHTML = '';
                            $('#taxFile').prop('required', false);
                            $('#taxFile').prop('disabled', true);
                            $('#taxFile').prop('readonly', true);
                            //其他
                            $('#elsemainuse').prop('required', false);
                            $('#elsemainuse').prop('disabled', true);
                            $('#elsemainuse').prop('readonly', true);

                        } else if (radioId === 'Inline1Radio3_5') {
                            //其他; 要填寫欄位
                            $('#taxFile').prop('required', true);
                            $('#taxFile').prop('disabled', false);
                            $('#taxFile').prop('readonly', false);
                            $('#elsemainuse').prop('required', true);
                            $('#elsemainuse').prop('disabled', false);
                            $('#elsemainuse').prop('readonly', false);

                        } else {
                            $('#taxFile').prop('required', true);
                            $('#taxFile').prop('disabled', false);
                            $('#taxFile').prop('readonly', false);
                            $('#elsemainuse').prop('required', false);
                            $('#elsemainuse').prop('disabled', true);
                            $('#elsemainuse').prop('readonly', true);
                            $('#elsemainuse').innerHTML = '';
                        }
                    }
                })
            });



            //------------------
            // 共有人幾位  *
            //------------------
            //主要用途 : CoOwnerRadio(隱藏/顯示共有人資料)
            $('input[name="CoOwnerRadio"]').change(function () {
                // 獲取被點選的 radio 按鈕的值
                var selectedValue = $(this).val();
                $('input[name="CoOwnerRadio"]').each(function () {
                    var radioId = $(this).attr('id');
                    // 檢查是否被點選
                    if ($(this).is(':checked')) {
                        // 根據不同的 id 做相應的處理
                        switch (radioId) {
                            case "jqCoOwnerRadio_0":
                                $('.getco1').hide();
                                $('.getco2').hide();
                                $('.getco3').hide();
                                $('.getco4').hide();
                                $('.getco5').hide();
                                $('.CoInput_1').prop('required', false);
                                $('.CoInput_2').prop('required', false);
                                $('.CoInput_3').prop('required', false);
                                $('.CoInput_4').prop('required', false);
                                $('.CoInput_5').prop('required', false);
                                break;
                            case "jqCoOwnerRadio_1":
                                $('.getco1').show();
                                $('.getco2').hide();
                                $('.getco3').hide();
                                $('.getco4').hide();
                                $('.getco5').hide();
                                $('.CoInput_1').prop('required', true);
                                $('.CoInput_2').prop('required', false);
                                $('.CoInput_3').prop('required', false);
                                $('.CoInput_4').prop('required', false);
                                $('.CoInput_5').prop('required', false);
                                break;
                            case "jqCoOwnerRadio_2":
                                $('.getco1').show();
                                $('.getco2').show();
                                $('.getco3').hide();
                                $('.getco4').hide();
                                $('.getco5').hide();
                                $('.CoInput_1').prop('required', true);
                                $('.CoInput_2').prop('required', true);
                                $('.CoInput_3').prop('required', false);
                                $('.CoInput_4').prop('required', false);
                                $('.CoInput_5').prop('required', false);
                                break;
                            case "jqCoOwnerRadio_3":
                                $('.getco1').show();
                                $('.getco2').show();
                                $('.getco3').show();
                                $('.getco4').hide();
                                $('.getco5').hide();
                                $('.CoInput_1').prop('required', true);
                                $('.CoInput_2').prop('required', true);
                                $('.CoInput_3').prop('required', true);
                                $('.CoInput_4').prop('required', false);
                                $('.CoInput_5').prop('required', false);
                                break;
                            case "jqCoOwnerRadio_4":
                                $('.getco1').show();
                                $('.getco2').show();
                                $('.getco3').show();
                                $('.getco4').show();
                                $('.getco5').hide();
                                $('.CoInput_1').prop('required', true);
                                $('.CoInput_2').prop('required', true);
                                $('.CoInput_3').prop('required', true);
                                $('.CoInput_4').prop('required', true);
                                $('.CoInput_5').prop('required', false);
                                break;
                            case "jqCoOwnerRadio_5":
                                $('.getco1').show();
                                $('.getco2').show();
                                $('.getco3').show();
                                $('.getco4').show();
                                $('.getco5').show();
                                $('.CoInput_1').prop('required', true);
                                $('.CoInput_2').prop('required', true);
                                $('.CoInput_3').prop('required', true);
                                $('.CoInput_4').prop('required', true);
                                $('.CoInput_5').prop('required', true);
                                break;
                        }
                    }
                })
            });

            //同戶籍地址
            $('.sameaddress').on('change', function () {
                var selectedIndex = $(this).attr('data-index');
                if ($(this).is(':checked')) {
                    $('.select_contact_' + selectedIndex).prop('disabled', true);
                    //required
                    $('.select_contact_' + selectedIndex).prop('required', false);
                } else {
                    $('.select_contact_' + selectedIndex).prop('disabled', false);
                    //required
                    $('.select_contact_' + selectedIndex).prop('required', true);
                }
            });

            //是否為外籍(不需填身分證)
            ///20230815Required還是要有，只是不需驗證
            $('.national_check').on('change', function () {
                var selectedIndex = $(this).attr('data-index');

                const inputElement = document.querySelector('.inputIDnumber[data-index="' + selectedIndex + '"]');
                if ($(this).is(':checked')) {
                    inputElement.removeAttribute('pattern');
                } else {
                    inputElement.setAttribute('pattern', '^[A-Z]\\d{9}$');
                }
            });

            //是否有代理人(checkbox)
            $('#agentCheckbox').on('change', function () {
                if ($(this).is(':checked')) {
                    //getagent
                    $('.getagent').show();
                    $('.agentrequired').prop('required', true);
                } else {
                    $('.getagent').hide();
                    $('.agentrequired').prop('required', false);
                }
            });

            //生日月份變更日期之最大值為30 or31
            const inputElements = document.querySelectorAll('.birthdayMonth');
            inputElements.forEach(function (inputElement) {
                inputElement.addEventListener('input', function () {
                    const inputValue = inputElement.value;
                    const dataIndex = inputElement.getAttribute('data-index');
                    if (inputValue == '1' || inputValue == '3' || inputValue == '5' || inputValue == '7' || inputValue == '8' || inputValue == '10' || inputValue == '12') {
                        //$('#birthdayDay_' + dataIndex).attr('max', 31); //設置最大值
                        $('.birthdayDay[data-index="' + dataIndex + '"]').attr('max', 31); //設置最大值
                    }
                    else if (inputValue == '2') {
                        //$('#birthdayDay_' + dataIndex).attr('max', 29); //設置最大值
                        $('.birthdayDay[data-index="' + dataIndex + '"]').attr('max', 29); //設置最大值
                    }
                    else {
                        //$('#birthdayDay_' + dataIndex).attr('max', 30); //設置最大值
                        $('.birthdayDay[data-index="' + dataIndex + '"]').attr('max', 30); //設置最大值
                    }
                    // 在这里执行你的其他操作
                });
            });


            //------------------
            // 編輯模式
            //------------------
            var formid = '@FormID';
            if (formid !== '') {
                $('input[name="FormID"]').val(formid);
                //房東姓名
                var Name = '@Name';
                $('input[name="Name_0"]').val(Name);
                //(法人)負責人
                var Principal = '@Principal';
                $('input[name="Principal"]').val(Principal);
                //性別
                var Gender = '@Gender';
                if (Gender !== '2') {   //非[法人]
                    $('input[name="genderRadio_0"][value="' + Gender + '"]').prop('checked', true);

                    //生日
                    var birthdaystr = '@BirthdayStr';
                    var birthpart = birthdaystr.split('-');
                    var birthyear = parseInt(parseInt(birthpart[0])-1911);
                    var birthmonth = parseInt(birthpart[1]);
                    var biirthday = parseInt(birthpart[2]);
                    $('#birthdayYear_0').val(birthyear);
                    $('#birthdayMonth_0').val(birthmonth);
                    $('#birthdayDay_0').val(biirthday);
                }
                else {
                    $('input[name="persontypeRadio"][value="1"]').prop('checked', true).trigger('change');
                }
                //身分證字號(法人-統一編號)
                const IDNumberpattern = /^[A-Z]\d{9}$/;
                var IDNumber = '@IDNumber';
                if (!IDNumberpattern.test(IDNumber)) {
                    $('#international_IDnumber').prop('checked', true).trigger('change');
                    //$('input[name="IDnumber_0"]').removeAttr('pattern');
                }
                $('input[name="IDnumber_0"]').val(IDNumber);
                //電話號碼
                var Phone = '@Phone';
                $('input[name="Phone_0"]').val(Phone);
                //銀行代碼
                var BankNo = '@BankNo';
                $('.select2_bank[data-index="1"]').val(BankNo).trigger('change');

                //銀行帳號
                    var BankAccount = '@BankAccount';
                    $('input[name="bankaccount_0"]').val(BankAccount);

                var memo = '@memo';
                if (memo !== '') {
                    $('#momo').val(memo);
                }

                //地址代碼
                //房東地址(下拉選單)
                var LaAddress_District = JSON.parse('@LaAddress_District');
                var LaAddress_Road = JSON.parse('@LaAddress_Road');
                var LaContact_District = JSON.parse('@LaContact_District');
                var LaContact_Road = JSON.parse('@LaContact_Road');
                $('.select2_district[data-index="1"]').empty().select2({ data: LaAddress_District });
                $('.select2_road[data-index="1"]').empty().select2({ data: LaAddress_Road });
                $('.select2_district[data-index="2"]').empty().select2({ data: LaContact_District });
                $('.select2_road[data-index="2"]').empty().select2({ data: LaContact_Road });

                //寫進地址
                var AddressCode = '@AddressCode';
                var AddressDetail = '@AddressDetail';
                $('.select2_city[data-index="1"]').val(AddressCode.substring(0, 2)).trigger('change');
                $('.select2_district[data-index="1"]').val(AddressCode.substring(0, 4)).trigger('change');
                $('.select2_road[data-index="1"]').val(AddressCode).trigger('change');
                $('input[name="AddressDetail_0"]').val(AddressDetail);
                var ContactCode = '@ContactCode';
                var ContactAddressDetail = '@ContactAddressDetail';
                $('.select2_city[data-index="2"]').val(ContactCode.substring(0, 2)).trigger('change');
                $('.select2_district[data-index="2"]').val(ContactCode.substring(0, 4)).trigger('change');
                $('.select2_road[data-index="2"]').val(ContactCode).trigger('change');
                $('input[name="detailcontact_0"]').val(ContactAddressDetail);

                //共有人
                var CoOwnerCount = '@CoOwnerCount';
                $('input[name="CoOwnerRadio"][value="' + CoOwnerCount + '"]').prop('checked', true).trigger('change');;

                var CoOwner1 = JSON.parse('@CoOwner1');
                var CoOwner2 = JSON.parse('@CoOwner2');
                var CoOwner3 = JSON.parse('@CoOwner3');
                var CoOwner4 = JSON.parse('@CoOwner4');
                var CoOwner5 = JSON.parse('@CoOwner5');
                var coOwnerArray = [];
                coOwnerArray.push(CoOwner1);
                coOwnerArray.push(CoOwner2);
                coOwnerArray.push(CoOwner3);
                coOwnerArray.push(CoOwner4);
                coOwnerArray.push(CoOwner5);



                var coCount = parseInt(CoOwnerCount);       //共有人人數
                for (var coInput = 1; coInput <= coCount; coInput++) {
                    var CoOwner = coOwnerArray[coInput-1];
                    var birthparts = CoOwner[1].split('-');
                    var coIDNumber = CoOwner[2];
                    $('.CoInput_' + coInput + '[data-input="0"]').val(CoOwner[0]);   //姓名
                    $('.CoInput_' + coInput + '[data-input="1"]').val(parseInt(birthparts[0]) - 1911);    //生日
                    $('.CoInput_' + coInput + '[data-input="2"]').val(parseInt(birthparts[1]));
                    $('.CoInput_' + coInput + '[data-input="3"]').val(parseInt(birthparts[2]));
                    $('.CoInput_' + coInput + '[data-input="4"]').val(coIDNumber);   //身分證
                    if (!IDNumberpattern.test(coIDNumber)) {
                        $('.national_check[data-index="' + coInput + '"]').prop('checked', true).trigger('change');
                    }
                    $('.CoInput_' + coInput + '[data-input="5"]').val(CoOwner[3]);   //號碼


                    //地址DDL
                    var CoAddress_District;
                    var CoAddress_Road;
                    var CoContact_District;
                    var CoContact_Road;

                    //共有人下拉選單
                    switch (coInput) {
                        case 1:
                            CoAddress_District = JSON.parse('@CoAddress1_District');
                            CoAddress_Road = JSON.parse('@CoAddress1_Road');
                            CoContact_District = JSON.parse('@CoContact1_District');
                            CoContact_Road = JSON.parse('@CoContact1_Road');
                            break;

                        case 2:
                            CoAddress_District = JSON.parse('@CoAddress2_District');
                            CoAddress_Road = JSON.parse('@CoAddress2_Road');
                            CoContact_District = JSON.parse('@CoContact2_District');
                            CoContact_Road = JSON.parse('@CoContact2_Road');
                            break;

                        case 3:
                            CoAddress_District = JSON.parse('@CoAddress3_District');
                            CoAddress_Road = JSON.parse('@CoAddress3_Road');
                            CoContact_District = JSON.parse('@CoContact3_District');
                            CoContact_Road = JSON.parse('@CoContact3_Road');
                            break;

                        case 4:
                            CoAddress_District = JSON.parse('@CoAddress4_District');
                            CoAddress_Road = JSON.parse('@CoAddress4_Road');
                            CoContact_District = JSON.parse('@CoContact4_District');
                            CoContact_Road = JSON.parse('@CoContact4_Road');

                            break;
                        case 5:
                            CoAddress_District = JSON.parse('@CoAddress5_District');
                            CoAddress_Road = JSON.parse('@CoAddress5_Road');
                            CoContact_District = JSON.parse('@CoContact5_District');
                            CoContact_Road = JSON.parse('@CoContact5_Road');
                            break;
                    }
                    $('.CoInput_' + coInput + '[data-input="7"]').empty().select2({ data: CoAddress_District });    //戶籍地址_鄉鎮市區
                    $('.CoInput_' + coInput + '[data-input="8"]').empty().select2({ data: CoAddress_Road });        //戶籍地址_道路名稱
                    $('.CoInput_' + coInput + '[data-input="11"]').empty().select2({ data: CoContact_District });   //通訊地址_鄉鎮市區
                    $('.CoInput_' + coInput + '[data-input="12"]').empty().select2({ data: CoContact_Road });       //通訊地址_道路名稱
                    //寫進地址
                    var Coaddress_code = CoOwner[4];
                    var Cocontact_code = CoOwner[6];
                    $('.CoInput_' + coInput + '[data-input="6"]').val(Coaddress_code.substring(0, 2)).trigger('change');
                    $('.CoInput_' + coInput + '[data-input="7"]').val(Coaddress_code.substring(0, 4)).trigger('change');
                    $('.CoInput_' + coInput + '[data-input="8"]').val(Coaddress_code).trigger('change');
                    $('.CoInput_' + coInput + '[data-input="9"]').val(CoOwner[5]);      //戶籍地址_詳細地址
                    $('.CoInput_' + coInput + '[data-input="10"]').val(Cocontact_code.substring(0, 2)).trigger('change');
                    $('.CoInput_' + coInput + '[data-input="11"]').val(Cocontact_code.substring(0, 4)).trigger('change');
                    $('.CoInput_' + coInput + '[data-input="12"]').val(Cocontact_code).trigger('change');
                    $('.CoInput_' + coInput + '[data-input="13"]').val(CoOwner[7]);      //通訊地址_詳細地址
                }
                //代理人
                var AgentCount = '@AgentCount';
                var Agent = JSON.parse('@Agent');
                if (AgentCount !== '0') {
                    $('input[name="agentCheckbox"]').prop('checked', true).trigger('change');;
                    $('input[name="Name_11"]').val(Agent[0]);
                    $('input[name="genderRadio_11"][value="' + Agent[1] + '"]').prop('checked', true);
                    //生日
                    var birthdaystr_Ag = Agent[2];
                    var birthpart_Ag = birthdaystr_Ag.split('-');
                    var birthyear_Ag = parseInt(parseInt(birthpart_Ag[0])-1911);
                    var birthmonth_Ag = parseInt(birthpart_Ag[1]);
                    var biirthday_Ag = parseInt(birthpart_Ag[2]);
                    $('#birthdayYear_11').val(birthyear_Ag);
                    $('#birthdayMonth_11').val(birthmonth_Ag);
                    $('#birthdayDay_11').val(biirthday_Ag);
                    //身分證
                    if (!IDNumberpattern.test(Agent[3])) {
                        $('#international_IDnumber_11').prop('checked', true).trigger('change');
                    }
                    $('#IDNumber_11').val(Agent[3]);
                    //電話
                    $('input[name="Phone_11"]').val(Agent[4]);

                    //地址
                    AgAddress_District = JSON.parse('@AgAddress_District');
                    AgAddress_Road = JSON.parse('@AgAddress_Road');
                    AgContact_District = JSON.parse('@AgContact_District');
                    AgContact_Road = JSON.parse('@AgContact_Road');
                    $('.select2_district[data-index="3"]').empty().select2({ data: AgAddress_District });    //戶籍地址_鄉鎮市區
                    $('.select2_road[data-index="3"]').empty().select2({ data: AgAddress_Road });        //戶籍地址_道路名稱
                    $('.select2_district[data-index="4"]').empty().select2({ data: AgContact_District });   //通訊地址_鄉鎮市區
                    $('.select2_road[data-index="4"]').empty().select2({ data: AgContact_Road });       //通訊地址_道路名稱

                    //寫進地址
                    var Agaddress_code = Agent[5];
                    var Agcontact_code = Agent[7];
                    $('.select2_city[data-index="3"]').val(Agaddress_code.substring(0, 2)).trigger('change');
                    $('.select2_district[data-index="3"]').val(Agaddress_code.substring(0, 4)).trigger('change');
                    $('.select2_road[data-index="3"]').val(Agaddress_code).trigger('change');
                    $('#AddressDetail_11').val(Agent[6]);      //戶籍地址_詳細地址
                    $('.select2_city[data-index="4"]').val(Agcontact_code.substring(0, 2)).trigger('change');
                    $('.select2_district[data-index="4"]').val(Agcontact_code.substring(0, 4)).trigger('change');
                    $('.select2_road[data-index="4"]').val(Agcontact_code).trigger('change');
                    $('#detailcontact_11').val(Agent[8]);      //通訊地址_詳細地址


                }


            }

            //臺灣地址下拉選單(change事件)
            $('body').on('change', '.select2_city', function () {
                var selectedIndex = $(this).attr('data-index');

                $('.select2_road[data-index="' + selectedIndex + '"]').empty();
                $('.select2_road[data-index="' + selectedIndex + '"]').select2({
                    placeholder: '街道',
                });
                var regioncode = $('.select2_city[data-index="' + selectedIndex + '"]').val();
                $.ajax({
                    type: "POST",
                    data: { regioncode: regioncode },
                    url: '@Url.Content("~/Form/DDLRegion/")',
                    dataType: 'json'
                }).done(function (dataresult) {
                    var ddlArray = JSON.parse(dataresult);
                    ddlArray = ddlArray.map(function (item) {
                        item.id = item.id.replace(/\"/g, '');
                        item.text = item.text.replace(/\"/g, '');
                        return item;
                    });
                    $('.select2_district[data-index="' + selectedIndex + '"]').empty();
                    var init_data = [
                        {
                            id: '',
                            text: '鄉/鎮/市/區'
                        },
                    ];
                    $('.select2_district[data-index="' + selectedIndex + '"]').select2({
                        data: init_data,
                    });
                    $('.select2_district[data-index="' + selectedIndex + '"]').select2({
                        data: ddlArray,
                        placeholder: {
                            id: '',
                            text: '鄉/鎮/市/區'
                        }
                    });
                });
            });
            $('body').on('change', '.select2_district', function () {
                var selectedIndex = $(this).attr('data-index');

                var regioncode = $('.select2_district[data-index="' + selectedIndex + '"]').val();
                $.ajax({
                    type: "POST",
                    data: { regioncode: regioncode },
                    url: '@Url.Content("~/Form/DDLRegion/")',
                    dataType: 'json'
                }).done(function (dataresult) {
                    var ddlArray = JSON.parse(dataresult);
                    ddlArray = ddlArray.map(function (item) {
                        item.id = item.id.replace(/\"/g, '');
                        item.text = item.text.replace(/\"/g, '');
                        return item;
                    });
                    $('.select2_road[data-index="' + selectedIndex + '"]').empty();
                    var init_data = [
                        {
                            id: '',
                            text: '街道'
                        },
                    ];
                    $('.select2_road[data-index="' + selectedIndex + '"]').select2({
                        data: init_data,
                    });
                    $('.select2_road[data-index="' + selectedIndex + '"]').select2({
                        data: ddlArray,
                        placeholder: {
                            id: '',
                            text: '街道'
                        }
                    });
                });
            });
        });

        //datepicker
        var controls = {
            leftArrow: '<i class="fal fa-angle-left" style="font-size: 1.25rem"></i>',
            rightArrow: '<i class="fal fa-angle-right" style="font-size: 1.25rem"></i>'
        }

        $('.birthday').datepicker(
            {
                format: 'yyyy-mm-dd',
                orientation: "請選擇出生年月日",
                todayHighlight: true,
                templates: controls
            });
            //$('.datepicker').datepicker({
            //    format: 'yyyy-mm-dd',
            //    maxDate: moment(),
            //    viewMode: 'months',
            //    locale: 'zh-cn',
            //    orientation: "請選擇起租日",
            //    todayHighlight: true,
            //    templates: controls
            //});

        $(function () {
            $(".datepicker").datepicker({
                format: 'YYYY年MM月',
                //maxDate: moment(),
                //viewMode: 'months',
                locale: 'zh-cn'
});
        });
</script>
}